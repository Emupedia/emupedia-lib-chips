// machine generated, do not edit!
static uint32_t _z80_op(z80* c, uint32_t ticks) {
  void(*tick)(z80*) = c->tick;
  uint8_t opcode; int8_t d; uint16_t a; uint8_t v; uint8_t l; uint8_t h; uint8_t f;
  /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->R=(c->R&0x80)|((c->R+1)&0x7F);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
  switch (opcode) {
    case 0x0:/*NOP*/ return ticks;
    case 0x1:/*LD BC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=c->WZ;return ticks;
    case 0x2:/*LD (BC),A*/c->WZ=c->BC;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
    case 0x3:/*INC BC*/tick(c);ticks++;tick(c);ticks++;c->BC++;return ticks;
    case 0x4:/*INC B*/{uint8_t r=c->B+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
    case 0x5:/*DEC B*/{uint8_t r=c->B-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
    case 0x6:/*LD B,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x7:/*RLCA*/{uint8_t r=c->A<<1|c->A>>7;c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_XF|Z80_YF));c->A=r;}return ticks;
    case 0x8:/*EX AF,AF'*/_SWP16(c->AF,c->AF_);return ticks;
    case 0x9:/*ADD HL,BC*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->BC;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->HL^r^c->BC)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0xa:/*LD A,(BC)*/c->WZ=c->BC;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
    case 0xb:/*DEC BC*/tick(c);ticks++;tick(c);ticks++;c->BC--;return ticks;
    case 0xc:/*INC C*/{uint8_t r=c->C+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
    case 0xd:/*DEC C*/{uint8_t r=c->C-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
    case 0xe:/*LD C,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0xf:/*RRCA*/{uint8_t r=c->A>>1|c->A<<7;c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
    case 0x10:/*DJNZ*/tick(c);ticks++;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(--c->B>0){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
    case 0x11:/*LD DE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=c->WZ;return ticks;
    case 0x12:/*LD (DE),A*/c->WZ=c->DE;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
    case 0x13:/*INC DE*/tick(c);ticks++;tick(c);ticks++;c->DE++;return ticks;
    case 0x14:/*INC D*/{uint8_t r=c->D+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
    case 0x15:/*DEC D*/{uint8_t r=c->D-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
    case 0x16:/*LD D,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x17:/*RLA*/{uint8_t r=c->A<<1|(c->F&Z80_CF);c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
    case 0x18:/*JR d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0x19:/*ADD HL,DE*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->DE;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->HL^r^c->DE)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0x1a:/*LD A,(DE)*/c->WZ=c->DE;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
    case 0x1b:/*DEC DE*/tick(c);ticks++;tick(c);ticks++;c->DE--;return ticks;
    case 0x1c:/*INC E*/{uint8_t r=c->E+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
    case 0x1d:/*DEC E*/{uint8_t r=c->E-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
    case 0x1e:/*LD E,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x1f:/*RRA*/{uint8_t r=c->A>>1|((c->F&Z80_CF)<<7);c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
    case 0x20:/*JR NZ,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
    case 0x21:/*LD HL,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->HL=c->WZ;return ticks;
    case 0x22:/*LD (nn),HL*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->HL;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->HL>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x23:/*INC HL*/tick(c);ticks++;tick(c);ticks++;c->HL++;return ticks;
    case 0x24:/*INC H*/{uint8_t r=c->H+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->H)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->H=r;}return ticks;
    case 0x25:/*DEC H*/{uint8_t r=c->H-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->H)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->H=r;}return ticks;
    case 0x26:/*LD H,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->H=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x27:/*DAA*/v=c->A;if(c->F&Z80_NF){if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v-=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v-=0x60;}}else{if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v+=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v+=0x60;}}c->F&=Z80_CF|Z80_NF;c->F|=(c->A>0x99)?Z80_CF:0;c->F|=(c->A^v)&Z80_HF;c->F|=c->szp[v];c->A=v;return ticks;
    case 0x28:/*JR Z,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
    case 0x29:/*ADD HL,HL*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->HL;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->HL^r^c->HL)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0x2a:/*LD HL,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->HL=(h<<8)|l;return ticks;
    case 0x2b:/*DEC HL*/tick(c);ticks++;tick(c);ticks++;c->HL--;return ticks;
    case 0x2c:/*INC L*/{uint8_t r=c->L+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->L)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->L=r;}return ticks;
    case 0x2d:/*DEC L*/{uint8_t r=c->L-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->L)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->L=r;}return ticks;
    case 0x2e:/*LD L,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->L=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x2f:/*CPL*/c->A^=0xFF;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_PF|Z80_CF))|Z80_HF|Z80_NF|(c->A&(Z80_YF|Z80_XF));return ticks;
    case 0x30:/*JR NC,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
    case 0x31:/*LD SP,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->SP=c->WZ;return ticks;
    case 0x32:/*LD (nn),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
    case 0x33:/*INC SP*/tick(c);ticks++;tick(c);ticks++;c->SP++;return ticks;
    case 0x34:/*INC (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x35:/*DEC (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x36:/*LD (HL),n*/a=c->HL;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x37:/*SCF*/c->F=(c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF))|Z80_CF|(c->A&(Z80_YF|Z80_XF));return ticks;
    case 0x38:/*JR C,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
    case 0x39:/*ADD HL,SP*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->SP;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->HL^r^c->SP)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0x3a:/*LD A,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
    case 0x3b:/*DEC SP*/tick(c);ticks++;tick(c);ticks++;c->SP--;return ticks;
    case 0x3c:/*INC A*/{uint8_t r=c->A+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
    case 0x3d:/*DEC A*/{uint8_t r=c->A-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
    case 0x3e:/*LD A,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x3f:/*CCF*/c->F=((c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF|Z80_CF))|((c->F&Z80_CF)<<4)|(c->A&(Z80_YF|Z80_XF)))^Z80_CF;return ticks;
    case 0x40:/*LD B,B*/c->B=c->B;return ticks;
    case 0x41:/*LD B,C*/c->B=c->C;return ticks;
    case 0x42:/*LD B,D*/c->B=c->D;return ticks;
    case 0x43:/*LD B,E*/c->B=c->E;return ticks;
    case 0x44:/*LD B,H*/c->B=c->H;return ticks;
    case 0x45:/*LD B,L*/c->B=c->L;return ticks;
    case 0x46:/*LD B,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x47:/*LD B,A*/c->B=c->A;return ticks;
    case 0x48:/*LD C,B*/c->C=c->B;return ticks;
    case 0x49:/*LD C,C*/c->C=c->C;return ticks;
    case 0x4a:/*LD C,D*/c->C=c->D;return ticks;
    case 0x4b:/*LD C,E*/c->C=c->E;return ticks;
    case 0x4c:/*LD C,H*/c->C=c->H;return ticks;
    case 0x4d:/*LD C,L*/c->C=c->L;return ticks;
    case 0x4e:/*LD C,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x4f:/*LD C,A*/c->C=c->A;return ticks;
    case 0x50:/*LD D,B*/c->D=c->B;return ticks;
    case 0x51:/*LD D,C*/c->D=c->C;return ticks;
    case 0x52:/*LD D,D*/c->D=c->D;return ticks;
    case 0x53:/*LD D,E*/c->D=c->E;return ticks;
    case 0x54:/*LD D,H*/c->D=c->H;return ticks;
    case 0x55:/*LD D,L*/c->D=c->L;return ticks;
    case 0x56:/*LD D,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x57:/*LD D,A*/c->D=c->A;return ticks;
    case 0x58:/*LD E,B*/c->E=c->B;return ticks;
    case 0x59:/*LD E,C*/c->E=c->C;return ticks;
    case 0x5a:/*LD E,D*/c->E=c->D;return ticks;
    case 0x5b:/*LD E,E*/c->E=c->E;return ticks;
    case 0x5c:/*LD E,H*/c->E=c->H;return ticks;
    case 0x5d:/*LD E,L*/c->E=c->L;return ticks;
    case 0x5e:/*LD E,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x5f:/*LD E,A*/c->E=c->A;return ticks;
    case 0x60:/*LD H,B*/c->H=c->B;return ticks;
    case 0x61:/*LD H,C*/c->H=c->C;return ticks;
    case 0x62:/*LD H,D*/c->H=c->D;return ticks;
    case 0x63:/*LD H,E*/c->H=c->E;return ticks;
    case 0x64:/*LD H,H*/c->H=c->H;return ticks;
    case 0x65:/*LD H,L*/c->H=c->L;return ticks;
    case 0x66:/*LD H,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->H=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x67:/*LD H,A*/c->H=c->A;return ticks;
    case 0x68:/*LD L,B*/c->L=c->B;return ticks;
    case 0x69:/*LD L,C*/c->L=c->C;return ticks;
    case 0x6a:/*LD L,D*/c->L=c->D;return ticks;
    case 0x6b:/*LD L,E*/c->L=c->E;return ticks;
    case 0x6c:/*LD L,H*/c->L=c->H;return ticks;
    case 0x6d:/*LD L,L*/c->L=c->L;return ticks;
    case 0x6e:/*LD L,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->L=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x6f:/*LD L,A*/c->L=c->A;return ticks;
    case 0x70:/*LD (HL),B*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x71:/*LD (HL),C*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x72:/*LD (HL),D*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x73:/*LD (HL),E*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x74:/*LD (HL),H*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x75:/*LD (HL),L*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x76:/*HALT*/_z80_halt(c);return ticks;
    case 0x77:/*LD (HL),A*/a=c->HL;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0x78:/*LD A,B*/c->A=c->B;return ticks;
    case 0x79:/*LD A,C*/c->A=c->C;return ticks;
    case 0x7a:/*LD A,D*/c->A=c->D;return ticks;
    case 0x7b:/*LD A,E*/c->A=c->E;return ticks;
    case 0x7c:/*LD A,H*/c->A=c->H;return ticks;
    case 0x7d:/*LD A,L*/c->A=c->L;return ticks;
    case 0x7e:/*LD A,(HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
    case 0x7f:/*LD A,A*/c->A=c->A;return ticks;
    case 0x80:/*ADD B*/{int res=c->A+c->B;c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
    case 0x81:/*ADD C*/{int res=c->A+c->C;c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
    case 0x82:/*ADD D*/{int res=c->A+c->D;c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
    case 0x83:/*ADD E*/{int res=c->A+c->E;c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
    case 0x84:/*ADD H*/{int res=c->A+c->H;c->F=_ADD_FLAGS(c->A,c->H,res);c->A=(uint8_t)res;}return ticks;
    case 0x85:/*ADD L*/{int res=c->A+c->L;c->F=_ADD_FLAGS(c->A,c->L,res);c->A=(uint8_t)res;}return ticks;
    case 0x86:/*ADD (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0x87:/*ADD A*/{int res=c->A+c->A;c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
    case 0x88:/*ADC B*/{int res=c->A+c->B+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
    case 0x89:/*ADC C*/{int res=c->A+c->C+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
    case 0x8a:/*ADC D*/{int res=c->A+c->D+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
    case 0x8b:/*ADC E*/{int res=c->A+c->E+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
    case 0x8c:/*ADC H*/{int res=c->A+c->H+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->H,res);c->A=(uint8_t)res;}return ticks;
    case 0x8d:/*ADC L*/{int res=c->A+c->L+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->L,res);c->A=(uint8_t)res;}return ticks;
    case 0x8e:/*ADC (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0x8f:/*ADC A*/{int res=c->A+c->A+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
    case 0x90:/*SUB B*/{int res=(int)c->A-(int)c->B;c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
    case 0x91:/*SUB C*/{int res=(int)c->A-(int)c->C;c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
    case 0x92:/*SUB D*/{int res=(int)c->A-(int)c->D;c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
    case 0x93:/*SUB E*/{int res=(int)c->A-(int)c->E;c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
    case 0x94:/*SUB H*/{int res=(int)c->A-(int)c->H;c->F=_SUB_FLAGS(c->A,c->H,res);c->A=(uint8_t)res;}return ticks;
    case 0x95:/*SUB L*/{int res=(int)c->A-(int)c->L;c->F=_SUB_FLAGS(c->A,c->L,res);c->A=(uint8_t)res;}return ticks;
    case 0x96:/*SUB (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0x97:/*SUB A*/{int res=(int)c->A-(int)c->A;c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
    case 0x98:/*SBC B*/{int res=(int)c->A-(int)c->B-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
    case 0x99:/*SBC C*/{int res=(int)c->A-(int)c->C-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
    case 0x9a:/*SBC D*/{int res=(int)c->A-(int)c->D-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
    case 0x9b:/*SBC E*/{int res=(int)c->A-(int)c->E-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
    case 0x9c:/*SBC H*/{int res=(int)c->A-(int)c->H-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->H,res);c->A=(uint8_t)res;}return ticks;
    case 0x9d:/*SBC L*/{int res=(int)c->A-(int)c->L-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->L,res);c->A=(uint8_t)res;}return ticks;
    case 0x9e:/*SBC (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0x9f:/*SBC A*/{int res=(int)c->A-(int)c->A-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
    case 0xa0:/*AND B*/c->A&=c->B;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa1:/*AND C*/c->A&=c->C;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa2:/*AND D*/c->A&=c->D;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa3:/*AND E*/c->A&=c->E;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa4:/*AND H*/c->A&=c->H;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa5:/*AND L*/c->A&=c->L;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa6:/*AND (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa7:/*AND A*/c->A&=c->A;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xa8:/*XOR B*/c->A^=c->B;c->F=c->szp[c->A];return ticks;
    case 0xa9:/*XOR C*/c->A^=c->C;c->F=c->szp[c->A];return ticks;
    case 0xaa:/*XOR D*/c->A^=c->D;c->F=c->szp[c->A];return ticks;
    case 0xab:/*XOR E*/c->A^=c->E;c->F=c->szp[c->A];return ticks;
    case 0xac:/*XOR H*/c->A^=c->H;c->F=c->szp[c->A];return ticks;
    case 0xad:/*XOR L*/c->A^=c->L;c->F=c->szp[c->A];return ticks;
    case 0xae:/*XOR (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
    case 0xaf:/*XOR A*/c->A^=c->A;c->F=c->szp[c->A];return ticks;
    case 0xb0:/*OR B*/c->A|=c->B;c->F=c->szp[c->A];return ticks;
    case 0xb1:/*OR C*/c->A|=c->C;c->F=c->szp[c->A];return ticks;
    case 0xb2:/*OR D*/c->A|=c->D;c->F=c->szp[c->A];return ticks;
    case 0xb3:/*OR E*/c->A|=c->E;c->F=c->szp[c->A];return ticks;
    case 0xb4:/*OR H*/c->A|=c->H;c->F=c->szp[c->A];return ticks;
    case 0xb5:/*OR L*/c->A|=c->L;c->F=c->szp[c->A];return ticks;
    case 0xb6:/*OR (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
    case 0xb7:/*OR A*/c->A|=c->A;c->F=c->szp[c->A];return ticks;
    case 0xb8:/*CP B*/{int res=(int)c->A-(int)c->B;c->F=_CP_FLAGS(c->A,c->B,res);}return ticks;
    case 0xb9:/*CP C*/{int res=(int)c->A-(int)c->C;c->F=_CP_FLAGS(c->A,c->C,res);}return ticks;
    case 0xba:/*CP D*/{int res=(int)c->A-(int)c->D;c->F=_CP_FLAGS(c->A,c->D,res);}return ticks;
    case 0xbb:/*CP E*/{int res=(int)c->A-(int)c->E;c->F=_CP_FLAGS(c->A,c->E,res);}return ticks;
    case 0xbc:/*CP H*/{int res=(int)c->A-(int)c->H;c->F=_CP_FLAGS(c->A,c->H,res);}return ticks;
    case 0xbd:/*CP L*/{int res=(int)c->A-(int)c->L;c->F=_CP_FLAGS(c->A,c->L,res);}return ticks;
    case 0xbe:/*CP (HL)*/a=c->HL;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
    case 0xbf:/*CP A*/{int res=(int)c->A-(int)c->A;c->F=_CP_FLAGS(c->A,c->A,res);}return ticks;
    case 0xc0:/*RET NZ*/tick(c);ticks++;if(!(c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xc1:/*POP BC*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=(h<<8)|l;return ticks;
    case 0xc2:/*JP NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
    case 0xc3:/*JP nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
    case 0xc4:/*CALL NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xc5:/*PUSH BC*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->BC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->BC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0xc6:/*ADD n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0xc7:/*RST 0x0*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x0;return ticks;
    case 0xc8:/*RET Z*/tick(c);ticks++;if((c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xc9:/*RET*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
    case 0xca:/*JP Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
    case 0xcb:
      /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->R=(c->R&0x80)|((c->R+1)&0x7F);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
      switch (opcode) {
        case 0x0:/*RLC B*/{uint8_t r=c->B<<1|c->B>>7;c->F=c->szp[r]|(c->B>>7&Z80_CF);c->B=r;}return ticks;
        case 0x1:/*RLC C*/{uint8_t r=c->C<<1|c->C>>7;c->F=c->szp[r]|(c->C>>7&Z80_CF);c->C=r;}return ticks;
        case 0x2:/*RLC D*/{uint8_t r=c->D<<1|c->D>>7;c->F=c->szp[r]|(c->D>>7&Z80_CF);c->D=r;}return ticks;
        case 0x3:/*RLC E*/{uint8_t r=c->E<<1|c->E>>7;c->F=c->szp[r]|(c->E>>7&Z80_CF);c->E=r;}return ticks;
        case 0x4:/*RLC H*/{uint8_t r=c->H<<1|c->H>>7;c->F=c->szp[r]|(c->H>>7&Z80_CF);c->H=r;}return ticks;
        case 0x5:/*RLC L*/{uint8_t r=c->L<<1|c->L>>7;c->F=c->szp[r]|(c->L>>7&Z80_CF);c->L=r;}return ticks;
        case 0x6:/*RLC (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x7:/*RLC A*/{uint8_t r=c->A<<1|c->A>>7;c->F=c->szp[r]|(c->A>>7&Z80_CF);c->A=r;}return ticks;
        case 0x8:/*RRC B*/{uint8_t r=c->B>>1|c->B<<7;c->F=c->szp[r]|(c->B&Z80_CF);c->B=r;}return ticks;
        case 0x9:/*RRC C*/{uint8_t r=c->C>>1|c->C<<7;c->F=c->szp[r]|(c->C&Z80_CF);c->C=r;}return ticks;
        case 0xa:/*RRC D*/{uint8_t r=c->D>>1|c->D<<7;c->F=c->szp[r]|(c->D&Z80_CF);c->D=r;}return ticks;
        case 0xb:/*RRC E*/{uint8_t r=c->E>>1|c->E<<7;c->F=c->szp[r]|(c->E&Z80_CF);c->E=r;}return ticks;
        case 0xc:/*RRC H*/{uint8_t r=c->H>>1|c->H<<7;c->F=c->szp[r]|(c->H&Z80_CF);c->H=r;}return ticks;
        case 0xd:/*RRC L*/{uint8_t r=c->L>>1|c->L<<7;c->F=c->szp[r]|(c->L&Z80_CF);c->L=r;}return ticks;
        case 0xe:/*RRC (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xf:/*RRC A*/{uint8_t r=c->A>>1|c->A<<7;c->F=c->szp[r]|(c->A&Z80_CF);c->A=r;}return ticks;
        case 0x10:/*RL B*/{uint8_t r=c->B<<1|(c->F&Z80_CF);c->F=(c->B>>7&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x11:/*RL C*/{uint8_t r=c->C<<1|(c->F&Z80_CF);c->F=(c->C>>7&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x12:/*RL D*/{uint8_t r=c->D<<1|(c->F&Z80_CF);c->F=(c->D>>7&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x13:/*RL E*/{uint8_t r=c->E<<1|(c->F&Z80_CF);c->F=(c->E>>7&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x14:/*RL H*/{uint8_t r=c->H<<1|(c->F&Z80_CF);c->F=(c->H>>7&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x15:/*RL L*/{uint8_t r=c->L<<1|(c->F&Z80_CF);c->F=(c->L>>7&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x16:/*RL (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x17:/*RL A*/{uint8_t r=c->A<<1|(c->F&Z80_CF);c->F=(c->A>>7&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x18:/*RR B*/{uint8_t r=c->B>>1|((c->F & Z80_CF)<<7);c->F=(c->B&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x19:/*RR C*/{uint8_t r=c->C>>1|((c->F & Z80_CF)<<7);c->F=(c->C&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x1a:/*RR D*/{uint8_t r=c->D>>1|((c->F & Z80_CF)<<7);c->F=(c->D&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x1b:/*RR E*/{uint8_t r=c->E>>1|((c->F & Z80_CF)<<7);c->F=(c->E&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x1c:/*RR H*/{uint8_t r=c->H>>1|((c->F & Z80_CF)<<7);c->F=(c->H&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x1d:/*RR L*/{uint8_t r=c->L>>1|((c->F & Z80_CF)<<7);c->F=(c->L&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x1e:/*RR (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x1f:/*RR A*/{uint8_t r=c->A>>1|((c->F & Z80_CF)<<7);c->F=(c->A&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x20:/*SLA B*/{uint8_t r=c->B<<1;c->F=(c->B>>7&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x21:/*SLA C*/{uint8_t r=c->C<<1;c->F=(c->C>>7&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x22:/*SLA D*/{uint8_t r=c->D<<1;c->F=(c->D>>7&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x23:/*SLA E*/{uint8_t r=c->E<<1;c->F=(c->E>>7&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x24:/*SLA H*/{uint8_t r=c->H<<1;c->F=(c->H>>7&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x25:/*SLA L*/{uint8_t r=c->L<<1;c->F=(c->L>>7&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x26:/*SLA (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x27:/*SLA A*/{uint8_t r=c->A<<1;c->F=(c->A>>7&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x28:/*SRA B*/{uint8_t r=c->B>>1|(c->B&0x80);c->F=(c->B&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x29:/*SRA C*/{uint8_t r=c->C>>1|(c->C&0x80);c->F=(c->C&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x2a:/*SRA D*/{uint8_t r=c->D>>1|(c->D&0x80);c->F=(c->D&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x2b:/*SRA E*/{uint8_t r=c->E>>1|(c->E&0x80);c->F=(c->E&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x2c:/*SRA H*/{uint8_t r=c->H>>1|(c->H&0x80);c->F=(c->H&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x2d:/*SRA L*/{uint8_t r=c->L>>1|(c->L&0x80);c->F=(c->L&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x2e:/*SRA (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x2f:/*SRA A*/{uint8_t r=c->A>>1|(c->A&0x80);c->F=(c->A&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x30:/*SLL B*/{uint8_t r=(c->B<<1)|1;c->F=(c->B>>7&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x31:/*SLL C*/{uint8_t r=(c->C<<1)|1;c->F=(c->C>>7&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x32:/*SLL D*/{uint8_t r=(c->D<<1)|1;c->F=(c->D>>7&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x33:/*SLL E*/{uint8_t r=(c->E<<1)|1;c->F=(c->E>>7&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x34:/*SLL H*/{uint8_t r=(c->H<<1)|1;c->F=(c->H>>7&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x35:/*SLL L*/{uint8_t r=(c->L<<1)|1;c->F=(c->L>>7&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x36:/*SLL (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x37:/*SLL A*/{uint8_t r=(c->A<<1)|1;c->F=(c->A>>7&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x38:/*SRL B*/{uint8_t r=c->B>>1;c->F=(c->B&Z80_CF)|c->szp[r];c->B=r;}return ticks;
        case 0x39:/*SRL C*/{uint8_t r=c->C>>1;c->F=(c->C&Z80_CF)|c->szp[r];c->C=r;}return ticks;
        case 0x3a:/*SRL D*/{uint8_t r=c->D>>1;c->F=(c->D&Z80_CF)|c->szp[r];c->D=r;}return ticks;
        case 0x3b:/*SRL E*/{uint8_t r=c->E>>1;c->F=(c->E&Z80_CF)|c->szp[r];c->E=r;}return ticks;
        case 0x3c:/*SRL H*/{uint8_t r=c->H>>1;c->F=(c->H&Z80_CF)|c->szp[r];c->H=r;}return ticks;
        case 0x3d:/*SRL L*/{uint8_t r=c->L>>1;c->F=(c->L&Z80_CF)|c->szp[r];c->L=r;}return ticks;
        case 0x3e:/*SRL (HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x3f:/*SRL A*/{uint8_t r=c->A>>1;c->F=(c->A&Z80_CF)|c->szp[r];c->A=r;}return ticks;
        case 0x40:/*BIT 0,B*/v=c->B&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x41:/*BIT 0,C*/v=c->C&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x42:/*BIT 0,D*/v=c->D&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x43:/*BIT 0,E*/v=c->E&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x44:/*BIT 0,H*/v=c->H&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x45:/*BIT 0,L*/v=c->L&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x46:/*BIT 0,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x47:/*BIT 0,A*/v=c->A&0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x48:/*BIT 1,B*/v=c->B&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x49:/*BIT 1,C*/v=c->C&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4a:/*BIT 1,D*/v=c->D&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4b:/*BIT 1,E*/v=c->E&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4c:/*BIT 1,H*/v=c->H&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4d:/*BIT 1,L*/v=c->L&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4e:/*BIT 1,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x4f:/*BIT 1,A*/v=c->A&0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x50:/*BIT 2,B*/v=c->B&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x51:/*BIT 2,C*/v=c->C&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x52:/*BIT 2,D*/v=c->D&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x53:/*BIT 2,E*/v=c->E&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x54:/*BIT 2,H*/v=c->H&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x55:/*BIT 2,L*/v=c->L&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x56:/*BIT 2,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x57:/*BIT 2,A*/v=c->A&0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x58:/*BIT 3,B*/v=c->B&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x59:/*BIT 3,C*/v=c->C&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5a:/*BIT 3,D*/v=c->D&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5b:/*BIT 3,E*/v=c->E&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5c:/*BIT 3,H*/v=c->H&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5d:/*BIT 3,L*/v=c->L&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5e:/*BIT 3,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x5f:/*BIT 3,A*/v=c->A&0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x60:/*BIT 4,B*/v=c->B&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x61:/*BIT 4,C*/v=c->C&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x62:/*BIT 4,D*/v=c->D&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x63:/*BIT 4,E*/v=c->E&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x64:/*BIT 4,H*/v=c->H&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x65:/*BIT 4,L*/v=c->L&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x66:/*BIT 4,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x67:/*BIT 4,A*/v=c->A&0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x68:/*BIT 5,B*/v=c->B&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x69:/*BIT 5,C*/v=c->C&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6a:/*BIT 5,D*/v=c->D&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6b:/*BIT 5,E*/v=c->E&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6c:/*BIT 5,H*/v=c->H&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6d:/*BIT 5,L*/v=c->L&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6e:/*BIT 5,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x6f:/*BIT 5,A*/v=c->A&0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x70:/*BIT 6,B*/v=c->B&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x71:/*BIT 6,C*/v=c->C&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x72:/*BIT 6,D*/v=c->D&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x73:/*BIT 6,E*/v=c->E&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x74:/*BIT 6,H*/v=c->H&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x75:/*BIT 6,L*/v=c->L&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x76:/*BIT 6,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x77:/*BIT 6,A*/v=c->A&0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x78:/*BIT 7,B*/v=c->B&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->B&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x79:/*BIT 7,C*/v=c->C&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->C&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7a:/*BIT 7,D*/v=c->D&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->D&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7b:/*BIT 7,E*/v=c->E&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->E&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7c:/*BIT 7,H*/v=c->H&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->H&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7d:/*BIT 7,L*/v=c->L&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->L&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7e:/*BIT 7,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x7f:/*BIT 7,A*/v=c->A&0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->A&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
        case 0x80:/*RES 0,B*/c->B&=~0x1;return ticks;
        case 0x81:/*RES 0,C*/c->C&=~0x1;return ticks;
        case 0x82:/*RES 0,D*/c->D&=~0x1;return ticks;
        case 0x83:/*RES 0,E*/c->E&=~0x1;return ticks;
        case 0x84:/*RES 0,H*/c->H&=~0x1;return ticks;
        case 0x85:/*RES 0,L*/c->L&=~0x1;return ticks;
        case 0x86:/*RES 0,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x87:/*RES 0,A*/c->A&=~0x1;return ticks;
        case 0x88:/*RES 1,B*/c->B&=~0x2;return ticks;
        case 0x89:/*RES 1,C*/c->C&=~0x2;return ticks;
        case 0x8a:/*RES 1,D*/c->D&=~0x2;return ticks;
        case 0x8b:/*RES 1,E*/c->E&=~0x2;return ticks;
        case 0x8c:/*RES 1,H*/c->H&=~0x2;return ticks;
        case 0x8d:/*RES 1,L*/c->L&=~0x2;return ticks;
        case 0x8e:/*RES 1,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x8f:/*RES 1,A*/c->A&=~0x2;return ticks;
        case 0x90:/*RES 2,B*/c->B&=~0x4;return ticks;
        case 0x91:/*RES 2,C*/c->C&=~0x4;return ticks;
        case 0x92:/*RES 2,D*/c->D&=~0x4;return ticks;
        case 0x93:/*RES 2,E*/c->E&=~0x4;return ticks;
        case 0x94:/*RES 2,H*/c->H&=~0x4;return ticks;
        case 0x95:/*RES 2,L*/c->L&=~0x4;return ticks;
        case 0x96:/*RES 2,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x97:/*RES 2,A*/c->A&=~0x4;return ticks;
        case 0x98:/*RES 3,B*/c->B&=~0x8;return ticks;
        case 0x99:/*RES 3,C*/c->C&=~0x8;return ticks;
        case 0x9a:/*RES 3,D*/c->D&=~0x8;return ticks;
        case 0x9b:/*RES 3,E*/c->E&=~0x8;return ticks;
        case 0x9c:/*RES 3,H*/c->H&=~0x8;return ticks;
        case 0x9d:/*RES 3,L*/c->L&=~0x8;return ticks;
        case 0x9e:/*RES 3,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x9f:/*RES 3,A*/c->A&=~0x8;return ticks;
        case 0xa0:/*RES 4,B*/c->B&=~0x10;return ticks;
        case 0xa1:/*RES 4,C*/c->C&=~0x10;return ticks;
        case 0xa2:/*RES 4,D*/c->D&=~0x10;return ticks;
        case 0xa3:/*RES 4,E*/c->E&=~0x10;return ticks;
        case 0xa4:/*RES 4,H*/c->H&=~0x10;return ticks;
        case 0xa5:/*RES 4,L*/c->L&=~0x10;return ticks;
        case 0xa6:/*RES 4,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xa7:/*RES 4,A*/c->A&=~0x10;return ticks;
        case 0xa8:/*RES 5,B*/c->B&=~0x20;return ticks;
        case 0xa9:/*RES 5,C*/c->C&=~0x20;return ticks;
        case 0xaa:/*RES 5,D*/c->D&=~0x20;return ticks;
        case 0xab:/*RES 5,E*/c->E&=~0x20;return ticks;
        case 0xac:/*RES 5,H*/c->H&=~0x20;return ticks;
        case 0xad:/*RES 5,L*/c->L&=~0x20;return ticks;
        case 0xae:/*RES 5,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xaf:/*RES 5,A*/c->A&=~0x20;return ticks;
        case 0xb0:/*RES 6,B*/c->B&=~0x40;return ticks;
        case 0xb1:/*RES 6,C*/c->C&=~0x40;return ticks;
        case 0xb2:/*RES 6,D*/c->D&=~0x40;return ticks;
        case 0xb3:/*RES 6,E*/c->E&=~0x40;return ticks;
        case 0xb4:/*RES 6,H*/c->H&=~0x40;return ticks;
        case 0xb5:/*RES 6,L*/c->L&=~0x40;return ticks;
        case 0xb6:/*RES 6,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xb7:/*RES 6,A*/c->A&=~0x40;return ticks;
        case 0xb8:/*RES 7,B*/c->B&=~0x80;return ticks;
        case 0xb9:/*RES 7,C*/c->C&=~0x80;return ticks;
        case 0xba:/*RES 7,D*/c->D&=~0x80;return ticks;
        case 0xbb:/*RES 7,E*/c->E&=~0x80;return ticks;
        case 0xbc:/*RES 7,H*/c->H&=~0x80;return ticks;
        case 0xbd:/*RES 7,L*/c->L&=~0x80;return ticks;
        case 0xbe:/*RES 7,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xbf:/*RES 7,A*/c->A&=~0x80;return ticks;
        case 0xc0:/*SET 0,B*/c->B|=0x1;return ticks;
        case 0xc1:/*SET 0,C*/c->C|=0x1;return ticks;
        case 0xc2:/*SET 0,D*/c->D|=0x1;return ticks;
        case 0xc3:/*SET 0,E*/c->E|=0x1;return ticks;
        case 0xc4:/*SET 0,H*/c->H|=0x1;return ticks;
        case 0xc5:/*SET 0,L*/c->L|=0x1;return ticks;
        case 0xc6:/*SET 0,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xc7:/*SET 0,A*/c->A|=0x1;return ticks;
        case 0xc8:/*SET 1,B*/c->B|=0x2;return ticks;
        case 0xc9:/*SET 1,C*/c->C|=0x2;return ticks;
        case 0xca:/*SET 1,D*/c->D|=0x2;return ticks;
        case 0xcb:/*SET 1,E*/c->E|=0x2;return ticks;
        case 0xcc:/*SET 1,H*/c->H|=0x2;return ticks;
        case 0xcd:/*SET 1,L*/c->L|=0x2;return ticks;
        case 0xce:/*SET 1,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xcf:/*SET 1,A*/c->A|=0x2;return ticks;
        case 0xd0:/*SET 2,B*/c->B|=0x4;return ticks;
        case 0xd1:/*SET 2,C*/c->C|=0x4;return ticks;
        case 0xd2:/*SET 2,D*/c->D|=0x4;return ticks;
        case 0xd3:/*SET 2,E*/c->E|=0x4;return ticks;
        case 0xd4:/*SET 2,H*/c->H|=0x4;return ticks;
        case 0xd5:/*SET 2,L*/c->L|=0x4;return ticks;
        case 0xd6:/*SET 2,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xd7:/*SET 2,A*/c->A|=0x4;return ticks;
        case 0xd8:/*SET 3,B*/c->B|=0x8;return ticks;
        case 0xd9:/*SET 3,C*/c->C|=0x8;return ticks;
        case 0xda:/*SET 3,D*/c->D|=0x8;return ticks;
        case 0xdb:/*SET 3,E*/c->E|=0x8;return ticks;
        case 0xdc:/*SET 3,H*/c->H|=0x8;return ticks;
        case 0xdd:/*SET 3,L*/c->L|=0x8;return ticks;
        case 0xde:/*SET 3,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xdf:/*SET 3,A*/c->A|=0x8;return ticks;
        case 0xe0:/*SET 4,B*/c->B|=0x10;return ticks;
        case 0xe1:/*SET 4,C*/c->C|=0x10;return ticks;
        case 0xe2:/*SET 4,D*/c->D|=0x10;return ticks;
        case 0xe3:/*SET 4,E*/c->E|=0x10;return ticks;
        case 0xe4:/*SET 4,H*/c->H|=0x10;return ticks;
        case 0xe5:/*SET 4,L*/c->L|=0x10;return ticks;
        case 0xe6:/*SET 4,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xe7:/*SET 4,A*/c->A|=0x10;return ticks;
        case 0xe8:/*SET 5,B*/c->B|=0x20;return ticks;
        case 0xe9:/*SET 5,C*/c->C|=0x20;return ticks;
        case 0xea:/*SET 5,D*/c->D|=0x20;return ticks;
        case 0xeb:/*SET 5,E*/c->E|=0x20;return ticks;
        case 0xec:/*SET 5,H*/c->H|=0x20;return ticks;
        case 0xed:/*SET 5,L*/c->L|=0x20;return ticks;
        case 0xee:/*SET 5,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xef:/*SET 5,A*/c->A|=0x20;return ticks;
        case 0xf0:/*SET 6,B*/c->B|=0x40;return ticks;
        case 0xf1:/*SET 6,C*/c->C|=0x40;return ticks;
        case 0xf2:/*SET 6,D*/c->D|=0x40;return ticks;
        case 0xf3:/*SET 6,E*/c->E|=0x40;return ticks;
        case 0xf4:/*SET 6,H*/c->H|=0x40;return ticks;
        case 0xf5:/*SET 6,L*/c->L|=0x40;return ticks;
        case 0xf6:/*SET 6,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xf7:/*SET 6,A*/c->A|=0x40;return ticks;
        case 0xf8:/*SET 7,B*/c->B|=0x80;return ticks;
        case 0xf9:/*SET 7,C*/c->C|=0x80;return ticks;
        case 0xfa:/*SET 7,D*/c->D|=0x80;return ticks;
        case 0xfb:/*SET 7,E*/c->E|=0x80;return ticks;
        case 0xfc:/*SET 7,H*/c->H|=0x80;return ticks;
        case 0xfd:/*SET 7,L*/c->L|=0x80;return ticks;
        case 0xfe:/*SET 7,(HL)*/a=c->HL;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xff:/*SET 7,A*/c->A|=0x80;return ticks;
        default: return ticks;
      }
      break;
    case 0xcc:/*CALL Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xcd:/*CALL nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;return ticks;
    case 0xce:/*ADC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0xcf:/*RST 0x8*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x8;return ticks;
    case 0xd0:/*RET NC*/tick(c);ticks++;if(!(c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xd1:/*POP DE*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=(h<<8)|l;return ticks;
    case 0xd2:/*JP NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
    case 0xd3:/*OUT (n),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>out*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/c->Z++;return ticks;
    case 0xd4:/*CALL NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xd5:/*PUSH DE*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->DE>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->DE;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0xd6:/*SUB n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0xd7:/*RST 0x10*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x10;return ticks;
    case 0xd8:/*RET C*/tick(c);ticks++;if((c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xd9:/*EXX*/_SWP16(c->BC,c->BC_);_SWP16(c->DE,c->DE_);_SWP16(c->HL,c->HL_);return ticks;
    case 0xda:/*JP C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
    case 0xdb:/*IN A,(n)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/return ticks;
    case 0xdc:/*CALL C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xdd:
      /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->R=(c->R&0x80)|((c->R+1)&0x7F);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
      switch (opcode) {
        case 0x0:/*NOP*/ return ticks;
        case 0x1:/*LD BC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=c->WZ;return ticks;
        case 0x2:/*LD (BC),A*/c->WZ=c->BC;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x3:/*INC BC*/tick(c);ticks++;tick(c);ticks++;c->BC++;return ticks;
        case 0x4:/*INC B*/{uint8_t r=c->B+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
        case 0x5:/*DEC B*/{uint8_t r=c->B-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
        case 0x6:/*LD B,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x7:/*RLCA*/{uint8_t r=c->A<<1|c->A>>7;c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_XF|Z80_YF));c->A=r;}return ticks;
        case 0x8:/*EX AF,AF'*/_SWP16(c->AF,c->AF_);return ticks;
        case 0x9:/*ADD IX,BC*/{c->WZ=c->IX+1;uint32_t r=c->IX+c->BC;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IX^r^c->BC)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IX=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0xa:/*LD A,(BC)*/c->WZ=c->BC;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0xb:/*DEC BC*/tick(c);ticks++;tick(c);ticks++;c->BC--;return ticks;
        case 0xc:/*INC C*/{uint8_t r=c->C+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
        case 0xd:/*DEC C*/{uint8_t r=c->C-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
        case 0xe:/*LD C,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0xf:/*RRCA*/{uint8_t r=c->A>>1|c->A<<7;c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x10:/*DJNZ*/tick(c);ticks++;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(--c->B>0){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x11:/*LD DE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=c->WZ;return ticks;
        case 0x12:/*LD (DE),A*/c->WZ=c->DE;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x13:/*INC DE*/tick(c);ticks++;tick(c);ticks++;c->DE++;return ticks;
        case 0x14:/*INC D*/{uint8_t r=c->D+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
        case 0x15:/*DEC D*/{uint8_t r=c->D-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
        case 0x16:/*LD D,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x17:/*RLA*/{uint8_t r=c->A<<1|(c->F&Z80_CF);c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x18:/*JR d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x19:/*ADD IX,DE*/{c->WZ=c->IX+1;uint32_t r=c->IX+c->DE;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IX^r^c->DE)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IX=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x1a:/*LD A,(DE)*/c->WZ=c->DE;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0x1b:/*DEC DE*/tick(c);ticks++;tick(c);ticks++;c->DE--;return ticks;
        case 0x1c:/*INC E*/{uint8_t r=c->E+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
        case 0x1d:/*DEC E*/{uint8_t r=c->E-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
        case 0x1e:/*LD E,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x1f:/*RRA*/{uint8_t r=c->A>>1|((c->F&Z80_CF)<<7);c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x20:/*JR NZ,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x21:/*LD IX,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IX=c->WZ;return ticks;
        case 0x22:/*LD (nn),IX*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IX;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IX>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x23:/*INC IX*/tick(c);ticks++;tick(c);ticks++;c->IX++;return ticks;
        case 0x24:/*INC IXH*/{uint8_t r=c->IXH+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IXH)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IXH=r;}return ticks;
        case 0x25:/*DEC IXH*/{uint8_t r=c->IXH-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IXH)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IXH=r;}return ticks;
        case 0x26:/*LD IXH,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->IXH=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x27:/*DAA*/v=c->A;if(c->F&Z80_NF){if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v-=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v-=0x60;}}else{if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v+=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v+=0x60;}}c->F&=Z80_CF|Z80_NF;c->F|=(c->A>0x99)?Z80_CF:0;c->F|=(c->A^v)&Z80_HF;c->F|=c->szp[v];c->A=v;return ticks;
        case 0x28:/*JR Z,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x29:/*ADD IX,IX*/{c->WZ=c->IX+1;uint32_t r=c->IX+c->IX;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IX^r^c->IX)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IX=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x2a:/*LD IX,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IX=(h<<8)|l;return ticks;
        case 0x2b:/*DEC IX*/tick(c);ticks++;tick(c);ticks++;c->IX--;return ticks;
        case 0x2c:/*INC IXL*/{uint8_t r=c->IXL+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IXL)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IXL=r;}return ticks;
        case 0x2d:/*DEC IXL*/{uint8_t r=c->IXL-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IXL)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IXL=r;}return ticks;
        case 0x2e:/*LD IXL,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->IXL=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x2f:/*CPL*/c->A^=0xFF;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_PF|Z80_CF))|Z80_HF|Z80_NF|(c->A&(Z80_YF|Z80_XF));return ticks;
        case 0x30:/*JR NC,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x31:/*LD SP,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->SP=c->WZ;return ticks;
        case 0x32:/*LD (nn),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x33:/*INC SP*/tick(c);ticks++;tick(c);ticks++;c->SP++;return ticks;
        case 0x34:/*INC (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x35:/*DEC (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x36:/*LD (IX+d),n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x37:/*SCF*/c->F=(c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF))|Z80_CF|(c->A&(Z80_YF|Z80_XF));return ticks;
        case 0x38:/*JR C,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x39:/*ADD IX,SP*/{c->WZ=c->IX+1;uint32_t r=c->IX+c->SP;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IX^r^c->SP)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IX=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x3a:/*LD A,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0x3b:/*DEC SP*/tick(c);ticks++;tick(c);ticks++;c->SP--;return ticks;
        case 0x3c:/*INC A*/{uint8_t r=c->A+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
        case 0x3d:/*DEC A*/{uint8_t r=c->A-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
        case 0x3e:/*LD A,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x3f:/*CCF*/c->F=((c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF|Z80_CF))|((c->F&Z80_CF)<<4)|(c->A&(Z80_YF|Z80_XF)))^Z80_CF;return ticks;
        case 0x40:/*LD B,B*/c->B=c->B;return ticks;
        case 0x41:/*LD B,C*/c->B=c->C;return ticks;
        case 0x42:/*LD B,D*/c->B=c->D;return ticks;
        case 0x43:/*LD B,E*/c->B=c->E;return ticks;
        case 0x44:/*LD B,IXH*/c->B=c->IXH;return ticks;
        case 0x45:/*LD B,IXL*/c->B=c->IXL;return ticks;
        case 0x46:/*LD B,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x47:/*LD B,A*/c->B=c->A;return ticks;
        case 0x48:/*LD C,B*/c->C=c->B;return ticks;
        case 0x49:/*LD C,C*/c->C=c->C;return ticks;
        case 0x4a:/*LD C,D*/c->C=c->D;return ticks;
        case 0x4b:/*LD C,E*/c->C=c->E;return ticks;
        case 0x4c:/*LD C,IXH*/c->C=c->IXH;return ticks;
        case 0x4d:/*LD C,IXL*/c->C=c->IXL;return ticks;
        case 0x4e:/*LD C,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x4f:/*LD C,A*/c->C=c->A;return ticks;
        case 0x50:/*LD D,B*/c->D=c->B;return ticks;
        case 0x51:/*LD D,C*/c->D=c->C;return ticks;
        case 0x52:/*LD D,D*/c->D=c->D;return ticks;
        case 0x53:/*LD D,E*/c->D=c->E;return ticks;
        case 0x54:/*LD D,IXH*/c->D=c->IXH;return ticks;
        case 0x55:/*LD D,IXL*/c->D=c->IXL;return ticks;
        case 0x56:/*LD D,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x57:/*LD D,A*/c->D=c->A;return ticks;
        case 0x58:/*LD E,B*/c->E=c->B;return ticks;
        case 0x59:/*LD E,C*/c->E=c->C;return ticks;
        case 0x5a:/*LD E,D*/c->E=c->D;return ticks;
        case 0x5b:/*LD E,E*/c->E=c->E;return ticks;
        case 0x5c:/*LD E,IXH*/c->E=c->IXH;return ticks;
        case 0x5d:/*LD E,IXL*/c->E=c->IXL;return ticks;
        case 0x5e:/*LD E,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x5f:/*LD E,A*/c->E=c->A;return ticks;
        case 0x60:/*LD IXH,B*/c->IXH=c->B;return ticks;
        case 0x61:/*LD IXH,C*/c->IXH=c->C;return ticks;
        case 0x62:/*LD IXH,D*/c->IXH=c->D;return ticks;
        case 0x63:/*LD IXH,E*/c->IXH=c->E;return ticks;
        case 0x64:/*LD IXH,IXH*/c->IXH=c->IXH;return ticks;
        case 0x65:/*LD IXH,IXL*/c->IXH=c->IXL;return ticks;
        case 0x66:/*LD H,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->H=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x67:/*LD IXH,A*/c->IXH=c->A;return ticks;
        case 0x68:/*LD IXL,B*/c->IXL=c->B;return ticks;
        case 0x69:/*LD IXL,C*/c->IXL=c->C;return ticks;
        case 0x6a:/*LD IXL,D*/c->IXL=c->D;return ticks;
        case 0x6b:/*LD IXL,E*/c->IXL=c->E;return ticks;
        case 0x6c:/*LD IXL,IXH*/c->IXL=c->IXH;return ticks;
        case 0x6d:/*LD IXL,IXL*/c->IXL=c->IXL;return ticks;
        case 0x6e:/*LD L,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->L=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x6f:/*LD IXL,A*/c->IXL=c->A;return ticks;
        case 0x70:/*LD (IX+d),B*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x71:/*LD (IX+d),C*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x72:/*LD (IX+d),D*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x73:/*LD (IX+d),E*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x74:/*LD (IX+d),H*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x75:/*LD (IX+d),L*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x76:/*HALT*/_z80_halt(c);return ticks;
        case 0x77:/*LD (IX+d),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x78:/*LD A,B*/c->A=c->B;return ticks;
        case 0x79:/*LD A,C*/c->A=c->C;return ticks;
        case 0x7a:/*LD A,D*/c->A=c->D;return ticks;
        case 0x7b:/*LD A,E*/c->A=c->E;return ticks;
        case 0x7c:/*LD A,IXH*/c->A=c->IXH;return ticks;
        case 0x7d:/*LD A,IXL*/c->A=c->IXL;return ticks;
        case 0x7e:/*LD A,(IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x7f:/*LD A,A*/c->A=c->A;return ticks;
        case 0x80:/*ADD B*/{int res=c->A+c->B;c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x81:/*ADD C*/{int res=c->A+c->C;c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x82:/*ADD D*/{int res=c->A+c->D;c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x83:/*ADD E*/{int res=c->A+c->E;c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x84:/*ADD IXH*/{int res=c->A+c->IXH;c->F=_ADD_FLAGS(c->A,c->IXH,res);c->A=(uint8_t)res;}return ticks;
        case 0x85:/*ADD IXL*/{int res=c->A+c->IXL;c->F=_ADD_FLAGS(c->A,c->IXL,res);c->A=(uint8_t)res;}return ticks;
        case 0x86:/*ADD (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x87:/*ADD A*/{int res=c->A+c->A;c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x88:/*ADC B*/{int res=c->A+c->B+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x89:/*ADC C*/{int res=c->A+c->C+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x8a:/*ADC D*/{int res=c->A+c->D+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x8b:/*ADC E*/{int res=c->A+c->E+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x8c:/*ADC IXH*/{int res=c->A+c->IXH+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->IXH,res);c->A=(uint8_t)res;}return ticks;
        case 0x8d:/*ADC IXL*/{int res=c->A+c->IXL+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->IXL,res);c->A=(uint8_t)res;}return ticks;
        case 0x8e:/*ADC (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x8f:/*ADC A*/{int res=c->A+c->A+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x90:/*SUB B*/{int res=(int)c->A-(int)c->B;c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x91:/*SUB C*/{int res=(int)c->A-(int)c->C;c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x92:/*SUB D*/{int res=(int)c->A-(int)c->D;c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x93:/*SUB E*/{int res=(int)c->A-(int)c->E;c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x94:/*SUB IXH*/{int res=(int)c->A-(int)c->IXH;c->F=_SUB_FLAGS(c->A,c->IXH,res);c->A=(uint8_t)res;}return ticks;
        case 0x95:/*SUB IXL*/{int res=(int)c->A-(int)c->IXL;c->F=_SUB_FLAGS(c->A,c->IXL,res);c->A=(uint8_t)res;}return ticks;
        case 0x96:/*SUB (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x97:/*SUB A*/{int res=(int)c->A-(int)c->A;c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x98:/*SBC B*/{int res=(int)c->A-(int)c->B-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x99:/*SBC C*/{int res=(int)c->A-(int)c->C-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x9a:/*SBC D*/{int res=(int)c->A-(int)c->D-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x9b:/*SBC E*/{int res=(int)c->A-(int)c->E-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x9c:/*SBC IXH*/{int res=(int)c->A-(int)c->IXH-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->IXH,res);c->A=(uint8_t)res;}return ticks;
        case 0x9d:/*SBC IXL*/{int res=(int)c->A-(int)c->IXL-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->IXL,res);c->A=(uint8_t)res;}return ticks;
        case 0x9e:/*SBC (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x9f:/*SBC A*/{int res=(int)c->A-(int)c->A-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0xa0:/*AND B*/c->A&=c->B;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa1:/*AND C*/c->A&=c->C;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa2:/*AND D*/c->A&=c->D;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa3:/*AND E*/c->A&=c->E;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa4:/*AND IXH*/c->A&=c->IXH;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa5:/*AND IXL*/c->A&=c->IXL;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa6:/*AND (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa7:/*AND A*/c->A&=c->A;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa8:/*XOR B*/c->A^=c->B;c->F=c->szp[c->A];return ticks;
        case 0xa9:/*XOR C*/c->A^=c->C;c->F=c->szp[c->A];return ticks;
        case 0xaa:/*XOR D*/c->A^=c->D;c->F=c->szp[c->A];return ticks;
        case 0xab:/*XOR E*/c->A^=c->E;c->F=c->szp[c->A];return ticks;
        case 0xac:/*XOR IXH*/c->A^=c->IXH;c->F=c->szp[c->A];return ticks;
        case 0xad:/*XOR IXL*/c->A^=c->IXL;c->F=c->szp[c->A];return ticks;
        case 0xae:/*XOR (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
        case 0xaf:/*XOR A*/c->A^=c->A;c->F=c->szp[c->A];return ticks;
        case 0xb0:/*OR B*/c->A|=c->B;c->F=c->szp[c->A];return ticks;
        case 0xb1:/*OR C*/c->A|=c->C;c->F=c->szp[c->A];return ticks;
        case 0xb2:/*OR D*/c->A|=c->D;c->F=c->szp[c->A];return ticks;
        case 0xb3:/*OR E*/c->A|=c->E;c->F=c->szp[c->A];return ticks;
        case 0xb4:/*OR IXH*/c->A|=c->IXH;c->F=c->szp[c->A];return ticks;
        case 0xb5:/*OR IXL*/c->A|=c->IXL;c->F=c->szp[c->A];return ticks;
        case 0xb6:/*OR (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
        case 0xb7:/*OR A*/c->A|=c->A;c->F=c->szp[c->A];return ticks;
        case 0xb8:/*CP B*/{int res=(int)c->A-(int)c->B;c->F=_CP_FLAGS(c->A,c->B,res);}return ticks;
        case 0xb9:/*CP C*/{int res=(int)c->A-(int)c->C;c->F=_CP_FLAGS(c->A,c->C,res);}return ticks;
        case 0xba:/*CP D*/{int res=(int)c->A-(int)c->D;c->F=_CP_FLAGS(c->A,c->D,res);}return ticks;
        case 0xbb:/*CP E*/{int res=(int)c->A-(int)c->E;c->F=_CP_FLAGS(c->A,c->E,res);}return ticks;
        case 0xbc:/*CP IXH*/{int res=(int)c->A-(int)c->IXH;c->F=_CP_FLAGS(c->A,c->IXH,res);}return ticks;
        case 0xbd:/*CP IXL*/{int res=(int)c->A-(int)c->IXL;c->F=_CP_FLAGS(c->A,c->IXL,res);}return ticks;
        case 0xbe:/*CP (IX+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
        case 0xbf:/*CP A*/{int res=(int)c->A-(int)c->A;c->F=_CP_FLAGS(c->A,c->A,res);}return ticks;
        case 0xc0:/*RET NZ*/tick(c);ticks++;if(!(c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xc1:/*POP BC*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=(h<<8)|l;return ticks;
        case 0xc2:/*JP NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
        case 0xc3:/*JP nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
        case 0xc4:/*CALL NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xc5:/*PUSH BC*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->BC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->BC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xc6:/*ADD n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xc7:/*RST 0x0*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x0;return ticks;
        case 0xc8:/*RET Z*/tick(c);ticks++;if((c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xc9:/*RET*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
        case 0xca:/*JP Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
        case 0xcb:
          /*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/
          /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
          switch (opcode) {
            case 0x0:/*RLC (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1:/*RLC (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2:/*RLC (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3:/*RLC (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x4:/*RLC (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x5:/*RLC (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x6:/*RLC (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x7:/*RLC (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8:/*RRC (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9:/*RRC (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa:/*RRC (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb:/*RRC (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc:/*RRC (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd:/*RRC (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe:/*RRC (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf:/*RRC (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x10:/*RL (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x11:/*RL (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x12:/*RL (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x13:/*RL (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x14:/*RL (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x15:/*RL (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x16:/*RL (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x17:/*RL (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x18:/*RR (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x19:/*RR (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1a:/*RR (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1b:/*RR (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1c:/*RR (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1d:/*RR (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1e:/*RR (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1f:/*RR (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x20:/*SLA (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x21:/*SLA (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x22:/*SLA (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x23:/*SLA (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x24:/*SLA (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x25:/*SLA (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x26:/*SLA (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x27:/*SLA (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x28:/*SRA (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x29:/*SRA (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2a:/*SRA (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2b:/*SRA (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2c:/*SRA (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2d:/*SRA (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2e:/*SRA (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2f:/*SRA (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x30:/*SLL (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x31:/*SLL (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x32:/*SLL (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x33:/*SLL (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x34:/*SLL (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x35:/*SLL (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x36:/*SLL (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x37:/*SLL (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x38:/*SRL (IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x39:/*SRL (IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3a:/*SRL (IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3b:/*SRL (IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3c:/*SRL (IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3d:/*SRL (IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3e:/*SRL (IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3f:/*SRL (IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x40:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x41:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x42:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x43:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x44:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x45:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x46:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x47:/*BIT 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x48:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x49:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4a:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4b:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4c:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4d:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4e:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4f:/*BIT 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x50:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x51:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x52:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x53:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x54:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x55:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x56:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x57:/*BIT 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x58:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x59:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5a:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5b:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5c:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5d:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5e:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5f:/*BIT 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x60:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x61:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x62:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x63:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x64:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x65:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x66:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x67:/*BIT 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x68:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x69:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6a:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6b:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6c:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6d:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6e:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6f:/*BIT 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x70:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x71:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x72:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x73:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x74:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x75:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x76:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x77:/*BIT 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x78:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x79:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7a:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7b:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7c:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7d:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7e:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7f:/*BIT 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x80:/*RES 0,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x81:/*RES 0,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x82:/*RES 0,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x83:/*RES 0,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x84:/*RES 0,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x85:/*RES 0,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x86:/*RES 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x87:/*RES 0,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x88:/*RES 1,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x89:/*RES 1,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8a:/*RES 1,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8b:/*RES 1,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8c:/*RES 1,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8d:/*RES 1,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8e:/*RES 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8f:/*RES 1,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x90:/*RES 2,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x91:/*RES 2,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x92:/*RES 2,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x93:/*RES 2,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x94:/*RES 2,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x95:/*RES 2,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x96:/*RES 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x97:/*RES 2,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x98:/*RES 3,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x99:/*RES 3,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9a:/*RES 3,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9b:/*RES 3,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9c:/*RES 3,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9d:/*RES 3,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9e:/*RES 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9f:/*RES 3,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa0:/*RES 4,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa1:/*RES 4,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa2:/*RES 4,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa3:/*RES 4,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa4:/*RES 4,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa5:/*RES 4,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa6:/*RES 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa7:/*RES 4,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa8:/*RES 5,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa9:/*RES 5,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xaa:/*RES 5,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xab:/*RES 5,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xac:/*RES 5,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xad:/*RES 5,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xae:/*RES 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xaf:/*RES 5,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb0:/*RES 6,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb1:/*RES 6,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb2:/*RES 6,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb3:/*RES 6,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb4:/*RES 6,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb5:/*RES 6,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb6:/*RES 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb7:/*RES 6,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb8:/*RES 7,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb9:/*RES 7,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xba:/*RES 7,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbb:/*RES 7,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbc:/*RES 7,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbd:/*RES 7,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbe:/*RES 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbf:/*RES 7,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc0:/*SET 0,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc1:/*SET 0,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc2:/*SET 0,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc3:/*SET 0,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc4:/*SET 0,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc5:/*SET 0,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc6:/*SET 0,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc7:/*SET 0,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc8:/*SET 1,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc9:/*SET 1,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xca:/*SET 1,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcb:/*SET 1,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcc:/*SET 1,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcd:/*SET 1,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xce:/*SET 1,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcf:/*SET 1,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd0:/*SET 2,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd1:/*SET 2,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd2:/*SET 2,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd3:/*SET 2,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd4:/*SET 2,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd5:/*SET 2,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd6:/*SET 2,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd7:/*SET 2,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd8:/*SET 3,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd9:/*SET 3,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xda:/*SET 3,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdb:/*SET 3,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdc:/*SET 3,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdd:/*SET 3,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xde:/*SET 3,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdf:/*SET 3,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe0:/*SET 4,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe1:/*SET 4,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe2:/*SET 4,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe3:/*SET 4,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe4:/*SET 4,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe5:/*SET 4,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe6:/*SET 4,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe7:/*SET 4,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe8:/*SET 5,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe9:/*SET 5,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xea:/*SET 5,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xeb:/*SET 5,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xec:/*SET 5,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xed:/*SET 5,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xee:/*SET 5,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xef:/*SET 5,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf0:/*SET 6,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf1:/*SET 6,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf2:/*SET 6,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf3:/*SET 6,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf4:/*SET 6,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf5:/*SET 6,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf6:/*SET 6,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf7:/*SET 6,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf8:/*SET 7,(IX+d),B*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf9:/*SET 7,(IX+d),C*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfa:/*SET 7,(IX+d),D*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfb:/*SET 7,(IX+d),E*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfc:/*SET 7,(IX+d),H*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfd:/*SET 7,(IX+d),L*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfe:/*SET 7,(IX+d)*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xff:/*SET 7,(IX+d),A*/a=c->WZ=c->IX+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            default: return ticks;
          }
          break;
        case 0xcc:/*CALL Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xcd:/*CALL nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;return ticks;
        case 0xce:/*ADC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xcf:/*RST 0x8*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x8;return ticks;
        case 0xd0:/*RET NC*/tick(c);ticks++;if(!(c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xd1:/*POP DE*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=(h<<8)|l;return ticks;
        case 0xd2:/*JP NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
        case 0xd3:/*OUT (n),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>out*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/c->Z++;return ticks;
        case 0xd4:/*CALL NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xd5:/*PUSH DE*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->DE>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->DE;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xd6:/*SUB n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xd7:/*RST 0x10*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x10;return ticks;
        case 0xd8:/*RET C*/tick(c);ticks++;if((c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xd9:/*EXX*/_SWP16(c->BC,c->BC_);_SWP16(c->DE,c->DE_);_SWP16(c->HL,c->HL_);return ticks;
        case 0xda:/*JP C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
        case 0xdb:/*IN A,(n)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/return ticks;
        case 0xdc:/*CALL C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xde:/*SBC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xdf:/*RST 0x18*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x18;return ticks;
        case 0xe0:/*RET PO*/tick(c);ticks++;if(!(c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xe1:/*POP IX*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IX=(h<<8)|l;return ticks;
        case 0xe2:/*JP PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
        case 0xe3:/*EX (SP),IX*/tick(c);ticks++;/*>rd*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IX;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IX>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->IX=c->WZ;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0xe4:/*CALL PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xe5:/*PUSH IX*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IX>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IX;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xe6:/*AND n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xe7:/*RST 0x20*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x20;return ticks;
        case 0xe8:/*RET PE*/tick(c);ticks++;if((c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xe9:/*JP IX*/c->PC=c->IX;return ticks;
        case 0xea:/*JP PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
        case 0xeb:/*EX DE,HL*/_SWP16(c->DE,c->HL);return ticks;
        case 0xec:/*CALL PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xee:/*XOR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
        case 0xef:/*RST 0x28*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x28;return ticks;
        case 0xf0:/*RET P*/tick(c);ticks++;if(!(c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xf1:/*POP AF*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->AF=(h<<8)|l;return ticks;
        case 0xf2:/*JP P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
        case 0xf3:/*DI*/_z80_di(c);return ticks;
        case 0xf4:/*CALL P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xf5:/*PUSH AF*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->AF>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->AF;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xf6:/*OR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
        case 0xf7:/*RST 0x30*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x30;return ticks;
        case 0xf8:/*RET M*/tick(c);ticks++;if((c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xf9:/*LD SP,IX*/tick(c);ticks++;tick(c);ticks++;c->SP=c->IX;return ticks;
        case 0xfa:/*JP M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
        case 0xfb:/*EI*/_z80_ei(c);return ticks;
        case 0xfc:/*CALL M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xfe:/*CP n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
        case 0xff:/*RST 0x38*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x38;return ticks;
        default: return ticks;
      }
      break;
    case 0xde:/*SBC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
    case 0xdf:/*RST 0x18*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x18;return ticks;
    case 0xe0:/*RET PO*/tick(c);ticks++;if(!(c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xe1:/*POP HL*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->HL=(h<<8)|l;return ticks;
    case 0xe2:/*JP PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
    case 0xe3:/*EX (SP),HL*/tick(c);ticks++;/*>rd*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->HL;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->HL>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->HL=c->WZ;tick(c);ticks++;tick(c);ticks++;return ticks;
    case 0xe4:/*CALL PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xe5:/*PUSH HL*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->HL>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->HL;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0xe6:/*AND n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
    case 0xe7:/*RST 0x20*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x20;return ticks;
    case 0xe8:/*RET PE*/tick(c);ticks++;if((c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xe9:/*JP HL*/c->PC=c->HL;return ticks;
    case 0xea:/*JP PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
    case 0xeb:/*EX DE,HL*/_SWP16(c->DE,c->HL);return ticks;
    case 0xec:/*CALL PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xed:
      /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->R=(c->R&0x80)|((c->R+1)&0x7F);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
      switch (opcode) {
        case 0x40:/*IN B,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->B]|(c->F&Z80_CF);return ticks;
        case 0x41:/*OUT (C),B*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x42:/*SBC HL,BC*/{c->WZ=c->HL+1;uint32_t r=c->HL-c->BC-(c->F&Z80_CF);c->F=(((c->HL^r^c->BC)>>8)&Z80_HF)|Z80_NF|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->BC^c->HL)&(c->HL^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x43:/*LD (nn),BC*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->BC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->BC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x44:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x46:/*IM 0*/c->IM=0;return ticks;
        case 0x47:/*LD I,A*/tick(c);ticks++;c->I=c->A;return ticks;
        case 0x48:/*IN C,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->C]|(c->F&Z80_CF);return ticks;
        case 0x49:/*OUT (C),C*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x4a:/*ADC HL,BC*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->BC+(c->F&Z80_CF);c->F=(((c->HL^r^c->BC)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->BC^c->HL^0x8000)&(c->BC^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x4b:/*LD BC,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=(h<<8)|l;return ticks;
        case 0x4c:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x4d:/*RETI*/_z80_reti(c);return ticks;
        case 0x4e:/*IM 0*/c->IM=0;return ticks;
        case 0x4f:/*LD R,A*/tick(c);ticks++;c->R=c->A;return ticks;
        case 0x50:/*IN D,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->D]|(c->F&Z80_CF);return ticks;
        case 0x51:/*OUT (C),D*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x52:/*SBC HL,DE*/{c->WZ=c->HL+1;uint32_t r=c->HL-c->DE-(c->F&Z80_CF);c->F=(((c->HL^r^c->DE)>>8)&Z80_HF)|Z80_NF|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->DE^c->HL)&(c->HL^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x53:/*LD (nn),DE*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->DE;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->DE>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x54:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x56:/*IM 1*/c->IM=1;return ticks;
        case 0x57:/*LD A,I*/tick(c);ticks++;c->A=c->I; c->F=_z80_sziff2(c,c->I)|(c->F&Z80_CF);return ticks;
        case 0x58:/*IN E,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->E]|(c->F&Z80_CF);return ticks;
        case 0x59:/*OUT (C),E*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x5a:/*ADC HL,DE*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->DE+(c->F&Z80_CF);c->F=(((c->HL^r^c->DE)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->DE^c->HL^0x8000)&(c->DE^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x5b:/*LD DE,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=(h<<8)|l;return ticks;
        case 0x5c:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x5e:/*IM 2*/c->IM=2;return ticks;
        case 0x5f:/*LD A,R*/tick(c);ticks++;c->A=c->R; c->F=_z80_sziff2(c,c->R)|(c->F&Z80_CF);return ticks;
        case 0x60:/*IN H,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->H=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->H]|(c->F&Z80_CF);return ticks;
        case 0x61:/*OUT (C),H*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x62:/*SBC HL,HL*/{c->WZ=c->HL+1;uint32_t r=c->HL-c->HL-(c->F&Z80_CF);c->F=(((c->HL^r^c->HL)>>8)&Z80_HF)|Z80_NF|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->HL^c->HL)&(c->HL^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x63:/*LD (nn),HL*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->HL;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->HL>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x64:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x66:/*IM 0*/c->IM=0;return ticks;
        case 0x67:/*RRD*/c->WZ=c->HL;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/l=c->A&0x0F;c->A=(c->A&0xF0)|(v&0x0F);v=(v>>4)|(l<<4);tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->F=c->szp[c->A]|(c->F&Z80_CF);return ticks;
        case 0x68:/*IN L,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->L=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->L]|(c->F&Z80_CF);return ticks;
        case 0x69:/*OUT (C),L*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x6a:/*ADC HL,HL*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->HL+(c->F&Z80_CF);c->F=(((c->HL^r^c->HL)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->HL^c->HL^0x8000)&(c->HL^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x6b:/*LD HL,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->HL=(h<<8)|l;return ticks;
        case 0x6c:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x6e:/*IM 0*/c->IM=0;return ticks;
        case 0x6f:/*RLD*/c->WZ=c->HL;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/l=c->A&0x0F;c->A=(c->A&0xF0)|(v>>4);v=(v<<4)|l;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->F=c->szp[c->A]|(c->F&Z80_CF);return ticks;
        case 0x70:/*IN (C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[v]|(c->F&Z80_CF);return ticks;
        case 0x71:/*???*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=0;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x72:/*SBC HL,SP*/{c->WZ=c->HL+1;uint32_t r=c->HL-c->SP-(c->F&Z80_CF);c->F=(((c->HL^r^c->SP)>>8)&Z80_HF)|Z80_NF|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->SP^c->HL)&(c->HL^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x73:/*LD (nn),SP*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->SP;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->SP>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x74:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x76:/*IM 1*/c->IM=1;return ticks;
        case 0x77:/*NOP (ED)*/ return ticks;
        case 0x78:/*IN A,(C)*/c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->F=c->szp[c->A]|(c->F&Z80_CF);return ticks;
        case 0x79:/*OUT (C),A*/c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/return ticks;
        case 0x7a:/*ADC HL,SP*/{c->WZ=c->HL+1;uint32_t r=c->HL+c->SP+(c->F&Z80_CF);c->F=(((c->HL^r^c->SP)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_SF|Z80_YF|Z80_XF))|((r&0xFFFF)?0:Z80_ZF)|(((c->SP^c->HL^0x8000)&(c->SP^r)&0x8000)>>13);c->HL=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x7b:/*LD SP,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->SP=(h<<8)|l;return ticks;
        case 0x7c:/*NEG*/v=c->A;c->A=0;{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x7e:/*IM 2*/c->IM=2;return ticks;
        case 0x7f:/*NOP (ED)*/ return ticks;
        case 0xa0:/*LDI*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->DE;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/tick(c);ticks++;tick(c);ticks++;v+=c->A;f=c->F&(Z80_SF|Z80_ZF|Z80_CF);if(v&0x02){f|=Z80_YF;}if(v&0x08){f|=Z80_XF;}c->HL++;c->DE++;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;return ticks;
        case 0xa1:/*CPI*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;{int r=(int)c->A-v;f=Z80_NF|(c->F&Z80_CF)|((r&0xFF)?(r&Z80_SF):Z80_ZF);if((r&0x0F)>(c->A&0x0F)){f|=Z80_HF;r--;}if(r&0x02){f|=Z80_YF;}if(r&0x08){f|=Z80_XF;}}c->WZ++;c->HL++;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;return ticks;
        case 0xa2:/*INI*/tick(c);ticks++;c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->B--;/*>wr*/c->ADDR=c->HL++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)((c->C+(+1))&0xFF)+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;return ticks;
        case 0xa3:/*OUTI*/tick(c);ticks++;/*>rd*/c->ADDR=c->HL++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B--;c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)c->L+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;return ticks;
        case 0xa8:/*LDD*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->DE;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/tick(c);ticks++;tick(c);ticks++;v+=c->A;f=c->F&(Z80_SF|Z80_ZF|Z80_CF);if(v&0x02){f|=Z80_YF;}if(v&0x08){f|=Z80_XF;}c->HL--;c->DE--;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;return ticks;
        case 0xa9:/*CPD*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int r=(int)c->A-v;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;f=Z80_NF|(c->F&Z80_CF)|((r&0xFF)?(r&Z80_SF):Z80_ZF);if((r&0x0F)>(c->A&0x0F)){f|=Z80_HF;r--;}if(r&0x02){f|=Z80_YF;}if(r&0x08){f|=Z80_XF;}}c->WZ--;c->HL--;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;return ticks;
        case 0xaa:/*IND*/tick(c);ticks++;c->WZ=c->BC;/*>in*/c->ADDR=c->WZ--;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->B--;/*>wr*/c->ADDR=c->HL--;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)((c->C+(-1))&0xFF)+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;return ticks;
        case 0xab:/*OUTD*/tick(c);ticks++;/*>rd*/c->ADDR=c->HL--;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B--;c->WZ=c->BC;/*>out*/c->ADDR=c->WZ--;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)c->L+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;return ticks;
        case 0xb0:/*LDIR*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->DE;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/tick(c);ticks++;tick(c);ticks++;v+=c->A;f=c->F&(Z80_SF|Z80_ZF|Z80_CF);if(v&0x02){f|=Z80_YF;}if(v&0x08){f|=Z80_XF;}c->HL++;c->DE++;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;if(c->BC){c->PC-=2;c->WZ=c->PC+1;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xb1:/*CPIR*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;{int r=(int)c->A-v;f=Z80_NF|(c->F&Z80_CF)|((r&0xFF)?(r&Z80_SF):Z80_ZF);if((r&0x0F)>(c->A&0x0F)){f|=Z80_HF;r--;}if(r&0x02){f|=Z80_YF;}if(r&0x08){f|=Z80_XF;}}c->WZ++;c->HL++;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;if(c->BC&&!(c->F&Z80_ZF)){c->PC-=2;c->WZ=c->PC+1;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xb2:/*INIR*/tick(c);ticks++;c->WZ=c->BC;/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->B--;/*>wr*/c->ADDR=c->HL++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)((c->C+(+1))&0xFF)+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;if(c->B){c->PC-=2;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xb3:/*OTIR*/tick(c);ticks++;/*>rd*/c->ADDR=c->HL++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B--;c->WZ=c->BC;/*>out*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)c->L+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;if(c->B){c->PC-=2;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xb8:/*LDDR*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->DE;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/tick(c);ticks++;tick(c);ticks++;v+=c->A;f=c->F&(Z80_SF|Z80_ZF|Z80_CF);if(v&0x02){f|=Z80_YF;}if(v&0x08){f|=Z80_XF;}c->HL--;c->DE--;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;if(c->BC){c->PC-=2;c->WZ=c->PC+1;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xb9:/*CPDR*//*>rd*/c->ADDR=c->HL;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int r=(int)c->A-v;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;f=Z80_NF|(c->F&Z80_CF)|((r&0xFF)?(r&Z80_SF):Z80_ZF);if((r&0x0F)>(c->A&0x0F)){f|=Z80_HF;r--;}if(r&0x02){f|=Z80_YF;}if(r&0x08){f|=Z80_XF;}}c->WZ--;c->HL--;c->BC--;if(c->BC){f|=Z80_VF;}c->F=f;if((c->BC)&&!(c->F&Z80_ZF)){c->PC-=2;c->WZ=c->PC+1;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xba:/*INDR*/tick(c);ticks++;c->WZ=c->BC;/*>in*/c->ADDR=c->WZ--;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/c->B--;/*>wr*/c->ADDR=c->HL--;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)((c->C+(-1))&0xFF)+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;if(c->B){c->PC-=2;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0xbb:/*OTDR*/tick(c);ticks++;/*>rd*/c->ADDR=c->HL--;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B--;c->WZ=c->BC;/*>out*/c->ADDR=c->WZ--;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/f=c->B?(c->B&Z80_SF):Z80_ZF;if(v&Z80_SF){f|=Z80_NF;}{uint32_t t=(uint32_t)c->L+(uint32_t)v;if(t&0x100){f|=(Z80_HF|Z80_CF);}f|=c->szp[((uint8_t)(t&0x07))^c->B]&Z80_PF;}c->F=f;if(c->B){c->PC-=2;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        default: return ticks;
      }
      break;
    case 0xee:/*XOR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
    case 0xef:/*RST 0x28*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x28;return ticks;
    case 0xf0:/*RET P*/tick(c);ticks++;if(!(c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xf1:/*POP AF*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->AF=(h<<8)|l;return ticks;
    case 0xf2:/*JP P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
    case 0xf3:/*DI*/_z80_di(c);return ticks;
    case 0xf4:/*CALL P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xf5:/*PUSH AF*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->AF>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->AF;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
    case 0xf6:/*OR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
    case 0xf7:/*RST 0x30*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x30;return ticks;
    case 0xf8:/*RET M*/tick(c);ticks++;if((c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
    case 0xf9:/*LD SP,HL*/tick(c);ticks++;tick(c);ticks++;c->SP=c->HL;return ticks;
    case 0xfa:/*JP M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
    case 0xfb:/*EI*/_z80_ei(c);return ticks;
    case 0xfc:/*CALL M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
    case 0xfd:
      /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->R=(c->R&0x80)|((c->R+1)&0x7F);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
      switch (opcode) {
        case 0x0:/*NOP*/ return ticks;
        case 0x1:/*LD BC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=c->WZ;return ticks;
        case 0x2:/*LD (BC),A*/c->WZ=c->BC;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x3:/*INC BC*/tick(c);ticks++;tick(c);ticks++;c->BC++;return ticks;
        case 0x4:/*INC B*/{uint8_t r=c->B+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
        case 0x5:/*DEC B*/{uint8_t r=c->B-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->B)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->B=r;}return ticks;
        case 0x6:/*LD B,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x7:/*RLCA*/{uint8_t r=c->A<<1|c->A>>7;c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_XF|Z80_YF));c->A=r;}return ticks;
        case 0x8:/*EX AF,AF'*/_SWP16(c->AF,c->AF_);return ticks;
        case 0x9:/*ADD IY,BC*/{c->WZ=c->IY+1;uint32_t r=c->IY+c->BC;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IY^r^c->BC)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IY=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0xa:/*LD A,(BC)*/c->WZ=c->BC;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0xb:/*DEC BC*/tick(c);ticks++;tick(c);ticks++;c->BC--;return ticks;
        case 0xc:/*INC C*/{uint8_t r=c->C+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
        case 0xd:/*DEC C*/{uint8_t r=c->C-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->C)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->C=r;}return ticks;
        case 0xe:/*LD C,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0xf:/*RRCA*/{uint8_t r=c->A>>1|c->A<<7;c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x10:/*DJNZ*/tick(c);ticks++;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(--c->B>0){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x11:/*LD DE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=c->WZ;return ticks;
        case 0x12:/*LD (DE),A*/c->WZ=c->DE;/*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x13:/*INC DE*/tick(c);ticks++;tick(c);ticks++;c->DE++;return ticks;
        case 0x14:/*INC D*/{uint8_t r=c->D+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
        case 0x15:/*DEC D*/{uint8_t r=c->D-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->D)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->D=r;}return ticks;
        case 0x16:/*LD D,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x17:/*RLA*/{uint8_t r=c->A<<1|(c->F&Z80_CF);c->F=(c->A>>7&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x18:/*JR d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x19:/*ADD IY,DE*/{c->WZ=c->IY+1;uint32_t r=c->IY+c->DE;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IY^r^c->DE)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IY=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x1a:/*LD A,(DE)*/c->WZ=c->DE;/*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0x1b:/*DEC DE*/tick(c);ticks++;tick(c);ticks++;c->DE--;return ticks;
        case 0x1c:/*INC E*/{uint8_t r=c->E+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
        case 0x1d:/*DEC E*/{uint8_t r=c->E-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->E)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->E=r;}return ticks;
        case 0x1e:/*LD E,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x1f:/*RRA*/{uint8_t r=c->A>>1|((c->F&Z80_CF)<<7);c->F=(c->A&Z80_CF)|(c->F&(Z80_SF|Z80_ZF|Z80_PF))|(r&(Z80_YF|Z80_XF));c->A=r;}return ticks;
        case 0x20:/*JR NZ,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x21:/*LD IY,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IY=c->WZ;return ticks;
        case 0x22:/*LD (nn),IY*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IY;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IY>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x23:/*INC IY*/tick(c);ticks++;tick(c);ticks++;c->IY++;return ticks;
        case 0x24:/*INC IYH*/{uint8_t r=c->IYH+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IYH)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IYH=r;}return ticks;
        case 0x25:/*DEC IYH*/{uint8_t r=c->IYH-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IYH)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IYH=r;}return ticks;
        case 0x26:/*LD IYH,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->IYH=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x27:/*DAA*/v=c->A;if(c->F&Z80_NF){if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v-=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v-=0x60;}}else{if(((c->A&0xF)>0x9)||(c->F&Z80_HF)){v+=0x06;}if((c->A>0x99)||(c->F&Z80_CF)){v+=0x60;}}c->F&=Z80_CF|Z80_NF;c->F|=(c->A>0x99)?Z80_CF:0;c->F|=(c->A^v)&Z80_HF;c->F|=c->szp[v];c->A=v;return ticks;
        case 0x28:/*JR Z,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_ZF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x29:/*ADD IY,IY*/{c->WZ=c->IY+1;uint32_t r=c->IY+c->IY;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IY^r^c->IY)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IY=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x2a:/*LD IY,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IY=(h<<8)|l;return ticks;
        case 0x2b:/*DEC IY*/tick(c);ticks++;tick(c);ticks++;c->IY--;return ticks;
        case 0x2c:/*INC IYL*/{uint8_t r=c->IYL+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IYL)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IYL=r;}return ticks;
        case 0x2d:/*DEC IYL*/{uint8_t r=c->IYL-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->IYL)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->IYL=r;}return ticks;
        case 0x2e:/*LD IYL,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->IYL=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x2f:/*CPL*/c->A^=0xFF;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_PF|Z80_CF))|Z80_HF|Z80_NF|(c->A&(Z80_YF|Z80_XF));return ticks;
        case 0x30:/*JR NC,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if(!(c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x31:/*LD SP,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->SP=c->WZ;return ticks;
        case 0x32:/*LD (nn),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/;c->W=c->A;return ticks;
        case 0x33:/*INC SP*/tick(c);ticks++;tick(c);ticks++;c->SP++;return ticks;
        case 0x34:/*INC (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x35:/*DEC (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^v)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x36:/*LD (IY+d),n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x37:/*SCF*/c->F=(c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF))|Z80_CF|(c->A&(Z80_YF|Z80_XF));return ticks;
        case 0x38:/*JR C,d*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if((c->F&Z80_CF)){c->WZ=c->PC=c->PC+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;}return ticks;
        case 0x39:/*ADD IY,SP*/{c->WZ=c->IY+1;uint32_t r=c->IY+c->SP;c->F=(c->F&(Z80_SF|Z80_ZF|Z80_VF))|(((c->IY^r^c->SP)>>8)&Z80_HF)|((r>>16)&Z80_CF)|((r>>8)&(Z80_YF|Z80_XF));c->IY=r;}tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0x3a:/*LD A,(nn)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;return ticks;
        case 0x3b:/*DEC SP*/tick(c);ticks++;tick(c);ticks++;c->SP--;return ticks;
        case 0x3c:/*INC A*/{uint8_t r=c->A+1;f=_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x80){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
        case 0x3d:/*DEC A*/{uint8_t r=c->A-1;f=Z80_NF|_SZ(r)|(r&(Z80_XF|Z80_YF))|((r^c->A)&Z80_HF);if(r==0x7F){f|=Z80_VF;}c->F=f|(c->F&Z80_CF);c->A=r;}return ticks;
        case 0x3e:/*LD A,n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x3f:/*CCF*/c->F=((c->F&(Z80_SF|Z80_ZF|Z80_YF|Z80_XF|Z80_PF|Z80_CF))|((c->F&Z80_CF)<<4)|(c->A&(Z80_YF|Z80_XF)))^Z80_CF;return ticks;
        case 0x40:/*LD B,B*/c->B=c->B;return ticks;
        case 0x41:/*LD B,C*/c->B=c->C;return ticks;
        case 0x42:/*LD B,D*/c->B=c->D;return ticks;
        case 0x43:/*LD B,E*/c->B=c->E;return ticks;
        case 0x44:/*LD B,IYH*/c->B=c->IYH;return ticks;
        case 0x45:/*LD B,IYL*/c->B=c->IYL;return ticks;
        case 0x46:/*LD B,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->B=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x47:/*LD B,A*/c->B=c->A;return ticks;
        case 0x48:/*LD C,B*/c->C=c->B;return ticks;
        case 0x49:/*LD C,C*/c->C=c->C;return ticks;
        case 0x4a:/*LD C,D*/c->C=c->D;return ticks;
        case 0x4b:/*LD C,E*/c->C=c->E;return ticks;
        case 0x4c:/*LD C,IYH*/c->C=c->IYH;return ticks;
        case 0x4d:/*LD C,IYL*/c->C=c->IYL;return ticks;
        case 0x4e:/*LD C,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->C=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x4f:/*LD C,A*/c->C=c->A;return ticks;
        case 0x50:/*LD D,B*/c->D=c->B;return ticks;
        case 0x51:/*LD D,C*/c->D=c->C;return ticks;
        case 0x52:/*LD D,D*/c->D=c->D;return ticks;
        case 0x53:/*LD D,E*/c->D=c->E;return ticks;
        case 0x54:/*LD D,IYH*/c->D=c->IYH;return ticks;
        case 0x55:/*LD D,IYL*/c->D=c->IYL;return ticks;
        case 0x56:/*LD D,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->D=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x57:/*LD D,A*/c->D=c->A;return ticks;
        case 0x58:/*LD E,B*/c->E=c->B;return ticks;
        case 0x59:/*LD E,C*/c->E=c->C;return ticks;
        case 0x5a:/*LD E,D*/c->E=c->D;return ticks;
        case 0x5b:/*LD E,E*/c->E=c->E;return ticks;
        case 0x5c:/*LD E,IYH*/c->E=c->IYH;return ticks;
        case 0x5d:/*LD E,IYL*/c->E=c->IYL;return ticks;
        case 0x5e:/*LD E,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->E=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x5f:/*LD E,A*/c->E=c->A;return ticks;
        case 0x60:/*LD IYH,B*/c->IYH=c->B;return ticks;
        case 0x61:/*LD IYH,C*/c->IYH=c->C;return ticks;
        case 0x62:/*LD IYH,D*/c->IYH=c->D;return ticks;
        case 0x63:/*LD IYH,E*/c->IYH=c->E;return ticks;
        case 0x64:/*LD IYH,IYH*/c->IYH=c->IYH;return ticks;
        case 0x65:/*LD IYH,IYL*/c->IYH=c->IYL;return ticks;
        case 0x66:/*LD H,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->H=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x67:/*LD IYH,A*/c->IYH=c->A;return ticks;
        case 0x68:/*LD IYL,B*/c->IYL=c->B;return ticks;
        case 0x69:/*LD IYL,C*/c->IYL=c->C;return ticks;
        case 0x6a:/*LD IYL,D*/c->IYL=c->D;return ticks;
        case 0x6b:/*LD IYL,E*/c->IYL=c->E;return ticks;
        case 0x6c:/*LD IYL,IYH*/c->IYL=c->IYH;return ticks;
        case 0x6d:/*LD IYL,IYL*/c->IYL=c->IYL;return ticks;
        case 0x6e:/*LD L,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->L=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x6f:/*LD IYL,A*/c->IYL=c->A;return ticks;
        case 0x70:/*LD (IY+d),B*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x71:/*LD (IY+d),C*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x72:/*LD (IY+d),D*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x73:/*LD (IY+d),E*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x74:/*LD (IY+d),H*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x75:/*LD (IY+d),L*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x76:/*HALT*/_z80_halt(c);return ticks;
        case 0x77:/*LD (IY+d),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0x78:/*LD A,B*/c->A=c->B;return ticks;
        case 0x79:/*LD A,C*/c->A=c->C;return ticks;
        case 0x7a:/*LD A,D*/c->A=c->D;return ticks;
        case 0x7b:/*LD A,E*/c->A=c->E;return ticks;
        case 0x7c:/*LD A,IYH*/c->A=c->IYH;return ticks;
        case 0x7d:/*LD A,IYL*/c->A=c->IYL;return ticks;
        case 0x7e:/*LD A,(IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/return ticks;
        case 0x7f:/*LD A,A*/c->A=c->A;return ticks;
        case 0x80:/*ADD B*/{int res=c->A+c->B;c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x81:/*ADD C*/{int res=c->A+c->C;c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x82:/*ADD D*/{int res=c->A+c->D;c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x83:/*ADD E*/{int res=c->A+c->E;c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x84:/*ADD IYH*/{int res=c->A+c->IYH;c->F=_ADD_FLAGS(c->A,c->IYH,res);c->A=(uint8_t)res;}return ticks;
        case 0x85:/*ADD IYL*/{int res=c->A+c->IYL;c->F=_ADD_FLAGS(c->A,c->IYL,res);c->A=(uint8_t)res;}return ticks;
        case 0x86:/*ADD (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x87:/*ADD A*/{int res=c->A+c->A;c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x88:/*ADC B*/{int res=c->A+c->B+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x89:/*ADC C*/{int res=c->A+c->C+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x8a:/*ADC D*/{int res=c->A+c->D+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x8b:/*ADC E*/{int res=c->A+c->E+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x8c:/*ADC IYH*/{int res=c->A+c->IYH+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->IYH,res);c->A=(uint8_t)res;}return ticks;
        case 0x8d:/*ADC IYL*/{int res=c->A+c->IYL+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->IYL,res);c->A=(uint8_t)res;}return ticks;
        case 0x8e:/*ADC (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x8f:/*ADC A*/{int res=c->A+c->A+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x90:/*SUB B*/{int res=(int)c->A-(int)c->B;c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x91:/*SUB C*/{int res=(int)c->A-(int)c->C;c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x92:/*SUB D*/{int res=(int)c->A-(int)c->D;c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x93:/*SUB E*/{int res=(int)c->A-(int)c->E;c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x94:/*SUB IYH*/{int res=(int)c->A-(int)c->IYH;c->F=_SUB_FLAGS(c->A,c->IYH,res);c->A=(uint8_t)res;}return ticks;
        case 0x95:/*SUB IYL*/{int res=(int)c->A-(int)c->IYL;c->F=_SUB_FLAGS(c->A,c->IYL,res);c->A=(uint8_t)res;}return ticks;
        case 0x96:/*SUB (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x97:/*SUB A*/{int res=(int)c->A-(int)c->A;c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0x98:/*SBC B*/{int res=(int)c->A-(int)c->B-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->B,res);c->A=(uint8_t)res;}return ticks;
        case 0x99:/*SBC C*/{int res=(int)c->A-(int)c->C-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->C,res);c->A=(uint8_t)res;}return ticks;
        case 0x9a:/*SBC D*/{int res=(int)c->A-(int)c->D-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->D,res);c->A=(uint8_t)res;}return ticks;
        case 0x9b:/*SBC E*/{int res=(int)c->A-(int)c->E-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->E,res);c->A=(uint8_t)res;}return ticks;
        case 0x9c:/*SBC IYH*/{int res=(int)c->A-(int)c->IYH-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->IYH,res);c->A=(uint8_t)res;}return ticks;
        case 0x9d:/*SBC IYL*/{int res=(int)c->A-(int)c->IYL-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->IYL,res);c->A=(uint8_t)res;}return ticks;
        case 0x9e:/*SBC (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0x9f:/*SBC A*/{int res=(int)c->A-(int)c->A-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,c->A,res);c->A=(uint8_t)res;}return ticks;
        case 0xa0:/*AND B*/c->A&=c->B;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa1:/*AND C*/c->A&=c->C;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa2:/*AND D*/c->A&=c->D;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa3:/*AND E*/c->A&=c->E;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa4:/*AND IYH*/c->A&=c->IYH;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa5:/*AND IYL*/c->A&=c->IYL;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa6:/*AND (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa7:/*AND A*/c->A&=c->A;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xa8:/*XOR B*/c->A^=c->B;c->F=c->szp[c->A];return ticks;
        case 0xa9:/*XOR C*/c->A^=c->C;c->F=c->szp[c->A];return ticks;
        case 0xaa:/*XOR D*/c->A^=c->D;c->F=c->szp[c->A];return ticks;
        case 0xab:/*XOR E*/c->A^=c->E;c->F=c->szp[c->A];return ticks;
        case 0xac:/*XOR IYH*/c->A^=c->IYH;c->F=c->szp[c->A];return ticks;
        case 0xad:/*XOR IYL*/c->A^=c->IYL;c->F=c->szp[c->A];return ticks;
        case 0xae:/*XOR (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
        case 0xaf:/*XOR A*/c->A^=c->A;c->F=c->szp[c->A];return ticks;
        case 0xb0:/*OR B*/c->A|=c->B;c->F=c->szp[c->A];return ticks;
        case 0xb1:/*OR C*/c->A|=c->C;c->F=c->szp[c->A];return ticks;
        case 0xb2:/*OR D*/c->A|=c->D;c->F=c->szp[c->A];return ticks;
        case 0xb3:/*OR E*/c->A|=c->E;c->F=c->szp[c->A];return ticks;
        case 0xb4:/*OR IYH*/c->A|=c->IYH;c->F=c->szp[c->A];return ticks;
        case 0xb5:/*OR IYL*/c->A|=c->IYL;c->F=c->szp[c->A];return ticks;
        case 0xb6:/*OR (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
        case 0xb7:/*OR A*/c->A|=c->A;c->F=c->szp[c->A];return ticks;
        case 0xb8:/*CP B*/{int res=(int)c->A-(int)c->B;c->F=_CP_FLAGS(c->A,c->B,res);}return ticks;
        case 0xb9:/*CP C*/{int res=(int)c->A-(int)c->C;c->F=_CP_FLAGS(c->A,c->C,res);}return ticks;
        case 0xba:/*CP D*/{int res=(int)c->A-(int)c->D;c->F=_CP_FLAGS(c->A,c->D,res);}return ticks;
        case 0xbb:/*CP E*/{int res=(int)c->A-(int)c->E;c->F=_CP_FLAGS(c->A,c->E,res);}return ticks;
        case 0xbc:/*CP IYH*/{int res=(int)c->A-(int)c->IYH;c->F=_CP_FLAGS(c->A,c->IYH,res);}return ticks;
        case 0xbd:/*CP IYL*/{int res=(int)c->A-(int)c->IYL;c->F=_CP_FLAGS(c->A,c->IYL,res);}return ticks;
        case 0xbe:/*CP (IY+d)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/;a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
        case 0xbf:/*CP A*/{int res=(int)c->A-(int)c->A;c->F=_CP_FLAGS(c->A,c->A,res);}return ticks;
        case 0xc0:/*RET NZ*/tick(c);ticks++;if(!(c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xc1:/*POP BC*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->BC=(h<<8)|l;return ticks;
        case 0xc2:/*JP NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
        case 0xc3:/*JP nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
        case 0xc4:/*CALL NZ,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xc5:/*PUSH BC*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->BC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->BC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xc6:/*ADD n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v;c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xc7:/*RST 0x0*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x0;return ticks;
        case 0xc8:/*RET Z*/tick(c);ticks++;if((c->F&Z80_ZF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xc9:/*RET*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;return ticks;
        case 0xca:/*JP Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)) { c->PC=c->WZ; }return ticks;
        case 0xcb:
          /*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;d=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/
          /*>fetch*/{c->CTRL|=Z80_M1;c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;opcode=c->DATA;c->CTRL&=~(Z80_M1|Z80_MREQ|Z80_RD);c->CTRL|=Z80_RFSH;tick(c);ticks++;c->CTRL|=Z80_MREQ;c->ADDR=c->IR;tick(c);ticks++;c->CTRL&=~(Z80_RFSH|Z80_MREQ);}/*<fetch*/
          switch (opcode) {
            case 0x0:/*RLC (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1:/*RLC (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2:/*RLC (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3:/*RLC (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x4:/*RLC (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x5:/*RLC (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x6:/*RLC (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x7:/*RLC (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|v>>7;c->F=c->szp[r]|(v>>7&Z80_CF);v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8:/*RRC (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9:/*RRC (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa:/*RRC (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb:/*RRC (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc:/*RRC (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd:/*RRC (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe:/*RRC (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf:/*RRC (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|v<<7;c->F=c->szp[r]|(v&Z80_CF);v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x10:/*RL (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x11:/*RL (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x12:/*RL (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x13:/*RL (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x14:/*RL (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x15:/*RL (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x16:/*RL (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x17:/*RL (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1|(c->F&Z80_CF);c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x18:/*RR (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x19:/*RR (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1a:/*RR (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1b:/*RR (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1c:/*RR (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1d:/*RR (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1e:/*RR (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x1f:/*RR (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|((c->F & Z80_CF)<<7);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x20:/*SLA (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x21:/*SLA (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x22:/*SLA (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x23:/*SLA (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x24:/*SLA (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x25:/*SLA (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x26:/*SLA (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x27:/*SLA (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v<<1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x28:/*SRA (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x29:/*SRA (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2a:/*SRA (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2b:/*SRA (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2c:/*SRA (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2d:/*SRA (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2e:/*SRA (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x2f:/*SRA (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1|(v&0x80);c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x30:/*SLL (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x31:/*SLL (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x32:/*SLL (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x33:/*SLL (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x34:/*SLL (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x35:/*SLL (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x36:/*SLL (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x37:/*SLL (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=(v<<1)|1;c->F=(v>>7&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x38:/*SRL (IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->B=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x39:/*SRL (IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->C=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3a:/*SRL (IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->D=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3b:/*SRL (IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->E=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3c:/*SRL (IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->H=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3d:/*SRL (IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->L=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3e:/*SRL (IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x3f:/*SRL (IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{uint8_t r=v>>1;c->F=(v&Z80_CF)|c->szp[r];v=r;}c->A=v;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x40:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x41:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x42:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x43:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x44:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x45:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x46:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x47:/*BIT 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x1;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x48:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x49:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4a:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4b:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4c:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4d:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4e:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x4f:/*BIT 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x2;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x50:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x51:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x52:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x53:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x54:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x55:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x56:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x57:/*BIT 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x4;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x58:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x59:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5a:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5b:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5c:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5d:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5e:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x5f:/*BIT 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x8;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x60:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x61:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x62:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x63:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x64:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x65:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x66:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x67:/*BIT 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x10;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x68:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x69:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6a:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6b:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6c:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6d:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6e:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x6f:/*BIT 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x20;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x70:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x71:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x72:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x73:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x74:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x75:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x76:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x77:/*BIT 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x40;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x78:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x79:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7a:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7b:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7c:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7d:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7e:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x7f:/*BIT 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/v&=0x80;f=Z80_HF|(v?(v&Z80_SF):(Z80_ZF|Z80_PF))|(c->W&(Z80_YF|Z80_XF));c->F=f|(c->F&Z80_CF);return ticks;
            case 0x80:/*RES 0,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x81:/*RES 0,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x82:/*RES 0,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x83:/*RES 0,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x84:/*RES 0,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x85:/*RES 0,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x86:/*RES 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x87:/*RES 0,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x88:/*RES 1,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x89:/*RES 1,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8a:/*RES 1,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8b:/*RES 1,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8c:/*RES 1,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8d:/*RES 1,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8e:/*RES 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x8f:/*RES 1,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x90:/*RES 2,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x91:/*RES 2,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x92:/*RES 2,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x93:/*RES 2,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x94:/*RES 2,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x95:/*RES 2,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x96:/*RES 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x97:/*RES 2,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x98:/*RES 3,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x99:/*RES 3,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9a:/*RES 3,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9b:/*RES 3,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9c:/*RES 3,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9d:/*RES 3,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9e:/*RES 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0x9f:/*RES 3,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa0:/*RES 4,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa1:/*RES 4,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa2:/*RES 4,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa3:/*RES 4,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa4:/*RES 4,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa5:/*RES 4,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa6:/*RES 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa7:/*RES 4,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa8:/*RES 5,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xa9:/*RES 5,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xaa:/*RES 5,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xab:/*RES 5,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xac:/*RES 5,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xad:/*RES 5,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xae:/*RES 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xaf:/*RES 5,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb0:/*RES 6,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb1:/*RES 6,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb2:/*RES 6,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb3:/*RES 6,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb4:/*RES 6,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb5:/*RES 6,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb6:/*RES 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb7:/*RES 6,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb8:/*RES 7,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xb9:/*RES 7,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xba:/*RES 7,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbb:/*RES 7,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbc:/*RES 7,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbd:/*RES 7,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbe:/*RES 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v&~0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xbf:/*RES 7,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v&~0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc0:/*SET 0,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc1:/*SET 0,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc2:/*SET 0,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc3:/*SET 0,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc4:/*SET 0,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc5:/*SET 0,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc6:/*SET 0,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x1;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc7:/*SET 0,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x1;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc8:/*SET 1,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xc9:/*SET 1,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xca:/*SET 1,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcb:/*SET 1,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcc:/*SET 1,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcd:/*SET 1,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xce:/*SET 1,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x2;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xcf:/*SET 1,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x2;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd0:/*SET 2,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd1:/*SET 2,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd2:/*SET 2,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd3:/*SET 2,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd4:/*SET 2,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd5:/*SET 2,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd6:/*SET 2,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x4;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd7:/*SET 2,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x4;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd8:/*SET 3,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xd9:/*SET 3,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xda:/*SET 3,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdb:/*SET 3,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdc:/*SET 3,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdd:/*SET 3,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xde:/*SET 3,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xdf:/*SET 3,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x8;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe0:/*SET 4,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe1:/*SET 4,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe2:/*SET 4,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe3:/*SET 4,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe4:/*SET 4,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe5:/*SET 4,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe6:/*SET 4,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x10;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe7:/*SET 4,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x10;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe8:/*SET 5,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xe9:/*SET 5,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xea:/*SET 5,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xeb:/*SET 5,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xec:/*SET 5,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xed:/*SET 5,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xee:/*SET 5,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x20;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xef:/*SET 5,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x20;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf0:/*SET 6,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf1:/*SET 6,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf2:/*SET 6,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf3:/*SET 6,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf4:/*SET 6,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf5:/*SET 6,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf6:/*SET 6,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x40;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf7:/*SET 6,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x40;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf8:/*SET 7,(IY+d),B*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->B=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->B;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xf9:/*SET 7,(IY+d),C*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->C=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->C;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfa:/*SET 7,(IY+d),D*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->D=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->D;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfb:/*SET 7,(IY+d),E*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->E=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->E;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfc:/*SET 7,(IY+d),H*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->H=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->H;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfd:/*SET 7,(IY+d),L*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->L=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->L;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xfe:/*SET 7,(IY+d)*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=v|0x80;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            case 0xff:/*SET 7,(IY+d),A*/a=c->WZ=c->IY+d;tick(c);ticks++;tick(c);ticks++;/*>rd*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A=v|0x80;/*>wr*/c->ADDR=a;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
            default: return ticks;
          }
          break;
        case 0xcc:/*CALL Z,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_ZF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xcd:/*CALL nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;return ticks;
        case 0xce:/*ADC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=c->A+v+(c->F&Z80_CF);c->F=_ADD_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xcf:/*RST 0x8*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x8;return ticks;
        case 0xd0:/*RET NC*/tick(c);ticks++;if(!(c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xd1:/*POP DE*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->DE=(h<<8)|l;return ticks;
        case 0xd2:/*JP NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
        case 0xd3:/*OUT (n),A*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>out*/c->ADDR=c->WZ;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_WR);c->DATA=c->A;tick(c);ticks++;c->CTRL&=~(Z80_IORQ|Z80_WR);tick(c);ticks++;tick(c);ticks++;/*<out*/c->Z++;return ticks;
        case 0xd4:/*CALL NC,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xd5:/*PUSH DE*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->DE>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->DE;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xd6:/*SUB n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xd7:/*RST 0x10*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x10;return ticks;
        case 0xd8:/*RET C*/tick(c);ticks++;if((c->F&Z80_CF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xd9:/*EXX*/_SWP16(c->BC,c->BC_);_SWP16(c->DE,c->DE_);_SWP16(c->HL,c->HL_);return ticks;
        case 0xda:/*JP C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)) { c->PC=c->WZ; }return ticks;
        case 0xdb:/*IN A,(n)*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->WZ=((c->A<<8)|v);/*>in*/c->ADDR=c->WZ++;tick(c);ticks++;c->CTRL|=(Z80_IORQ|Z80_RD);tick(c);ticks++;c->A=c->DATA;c->CTRL&=~(Z80_IORQ|Z80_RD);tick(c);ticks++;tick(c);ticks++;/*<in*/return ticks;
        case 0xdc:/*CALL C,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_CF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xde:/*SBC n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v-(c->F&Z80_CF);c->F=_SUB_FLAGS(c->A,v,res);c->A=(uint8_t)res;}return ticks;
        case 0xdf:/*RST 0x18*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x18;return ticks;
        case 0xe0:/*RET PO*/tick(c);ticks++;if(!(c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xe1:/*POP IY*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->IY=(h<<8)|l;return ticks;
        case 0xe2:/*JP PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
        case 0xe3:/*EX (SP),IY*/tick(c);ticks++;/*>rd*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>wr*/c->ADDR=c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IY;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=c->SP+1;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IY>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->IY=c->WZ;tick(c);ticks++;tick(c);ticks++;return ticks;
        case 0xe4:/*CALL PO,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xe5:/*PUSH IY*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->IY>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->IY;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xe6:/*AND n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A&=v;c->F=c->szp[c->A]|Z80_HF;return ticks;
        case 0xe7:/*RST 0x20*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x20;return ticks;
        case 0xe8:/*RET PE*/tick(c);ticks++;if((c->F&Z80_PF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xe9:/*JP IY*/c->PC=c->IY;return ticks;
        case 0xea:/*JP PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)) { c->PC=c->WZ; }return ticks;
        case 0xeb:/*EX DE,HL*/_SWP16(c->DE,c->HL);return ticks;
        case 0xec:/*CALL PE,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_PF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xee:/*XOR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A^=v;c->F=c->szp[c->A];return ticks;
        case 0xef:/*RST 0x28*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x28;return ticks;
        case 0xf0:/*RET P*/tick(c);ticks++;if(!(c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xf1:/*POP AF*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;l=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;h=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->AF=(h<<8)|l;return ticks;
        case 0xf2:/*JP P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
        case 0xf3:/*DI*/_z80_di(c);return ticks;
        case 0xf4:/*CALL P,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if (!(c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xf5:/*PUSH AF*/tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->AF>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->AF;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/return ticks;
        case 0xf6:/*OR n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->A|=v;c->F=c->szp[c->A];return ticks;
        case 0xf7:/*RST 0x30*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x30;return ticks;
        case 0xf8:/*RET M*/tick(c);ticks++;if((c->F&Z80_SF)){/*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->SP++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/c->PC=c->WZ;}return ticks;
        case 0xf9:/*LD SP,IY*/tick(c);ticks++;tick(c);ticks++;c->SP=c->IY;return ticks;
        case 0xfa:/*JP M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)) { c->PC=c->WZ; }return ticks;
        case 0xfb:/*EI*/_z80_ei(c);return ticks;
        case 0xfc:/*CALL M,nn*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->Z=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;c->W=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/if ((c->F&Z80_SF)){tick(c);ticks++;/*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)(c->PC>>8);tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->PC=c->WZ;}return ticks;
        case 0xfe:/*CP n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
        case 0xff:/*RST 0x38*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x38;return ticks;
        default: return ticks;
      }
      break;
    case 0xfe:/*CP n*//*>rd*/c->ADDR=c->PC++;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_RD);tick(c);ticks++;v=c->DATA;c->CTRL&=~(Z80_MREQ|Z80_RD);tick(c);ticks++;/*<rd*/{int res=(int)c->A-(int)v;c->F=_CP_FLAGS(c->A,v,res);}return ticks;
    case 0xff:/*RST 0x38*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC<<8;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*//*>wr*/c->ADDR=--c->SP;tick(c);ticks++;c->CTRL|=(Z80_MREQ|Z80_WR);c->DATA=(uint8_t)c->PC;tick(c);ticks++;c->CTRL&=~(Z80_MREQ|Z80_WR);tick(c);ticks++;/*wr<*/c->WZ=c->PC=(uint16_t)0x38;return ticks;
    default: return ticks;
  }
  return ticks;
}
